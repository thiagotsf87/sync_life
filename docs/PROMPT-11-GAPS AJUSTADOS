Foram identificados 3 gaps na implementação da Fase 1 que precisam ser corrigidos 
antes de avançar para a Fase 2. Corrija os 3 itens abaixo nesta sessão.

---

ITEM 1 — Extrair WizardStepper como componente reutilizável

Problema: o stepper do onboarding está inline em onboarding/page.tsx.
A spec do Prompt 8 exigia src/components/shared/WizardStepper.tsx como 
componente separado para reuso no wizard de Nova Meta (Fase 3).

O que fazer:
1. Criar src/components/shared/WizardStepper.tsx extraindo a lógica do stepper
   atual do onboarding/page.tsx

Interface esperada do componente:
  interface WizardStepperProps {
    steps: { id: number; label: string }[]
    currentStep: number
    onStepClick?: (step: number) => void  // opcional, só habilita passos anteriores
  }

Visual (manter idêntico ao que já existe no onboarding):
  - Barra horizontal no topo com bolinhas numeradas + labels
  - Passo atual: destacado com a cor do módulo ativo (var(--em))
  - Passos concluídos: check icon + cor var(--em) com opacidade reduzida
  - Passos futuros: cor var(--t3)
  - Linha conectando os passos com preenchimento proporcional ao progresso

2. Substituir o stepper inline no onboarding/page.tsx pelo novo componente:
   <WizardStepper steps={ONBOARDING_STEPS} currentStep={currentStep} />

3. Garantir que o comportamento do onboarding não muda após a extração.
   Teste manual: percorra os 5 passos e confirme que o visual é idêntico ao anterior.

---

ITEM 2 — Criar hook useUserPlan isolado

Problema: a lógica de gate PRO está duplicada inline no ModePill e nas 
Configurações. A spec do Prompt 10 exigia src/hooks/use-user-plan.ts como 
fonte única de verdade para essa verificação.

O que fazer:
1. Criar src/hooks/use-user-plan.ts com o seguinte contrato:

  interface UserPlan {
    plan: 'free' | 'pro'
    isPro: boolean
    isFree: boolean
    isLoading: boolean
  }

  export function useUserPlan(): UserPlan

  Implementação:
  - Buscar o campo `plan` da tabela profiles do Supabase para o usuário logado
  - Usar o cliente Supabase browser (já configurado no projeto)
  - Cache simples com useState + useEffect (sem React Query por enquanto)
  - Retornar isLoading: true enquanto a busca não termina
  - Fallback: se falhar a busca, retornar plan: 'free' (seguro por padrão)

2. Substituir toda lógica inline de verificação PRO nos seguintes locais:
  - src/components/shell/ModePill.tsx → usar useUserPlan().isFree
  - src/app/(app)/configuracoes/page.tsx (seções de integrações e modo) → usar useUserPlan()
  - Qualquer outro lugar no código onde existe verificação de plan inline

3. Confirmar que o gate PRO continua funcionando após a refatoração:
  - Usuário FREE clicando em ModePill Jornada → toast de bloqueio aparece
  - Usuário FREE em Configurações > Integrações → cards PRO mostram lock

---

ITEM 3 — Toast de erro em falha de sync Supabase

Problema: quando a persistência de modo ou tema falha no Supabase,
o prompt 10 exigia rollback do store + toast de erro. Isso pode estar 
incompleto no AppShell ou nos hooks useMode/useTheme.

O que fazer:
1. Verificar src/hooks/use-mode.ts e src/hooks/use-theme.ts
   A lógica de toggle deve seguir esse padrão exato:

   async function toggleMode() {
     const previousMode = store.mode              // salvar estado anterior
     store.setMode(newMode)                       // atualizar store (otimista)
     
     const { error } = await supabase
       .from('profiles')
       .update({ mode: newMode })
       .eq('id', userId)
     
     if (error) {
       store.setMode(previousMode)                // reverter store
       toast.error('Erro ao salvar preferência. Tente novamente.')
     }
   }

   Aplicar o mesmo padrão em toggleTheme() com o campo theme.

2. Verificar se o Sonner (ou biblioteca de toast que o projeto usa) está 
   configurado corretamente para exibir toasts de erro.
   O toast de erro deve:
   - Aparecer no canto inferior direito (ou conforme padrão do projeto)
   - Duração: 4000ms
   - Estilo: background var(--red) ou variante destrutiva do shadcn

3. Para testar: simular falha de rede (DevTools → Network → Offline) 
   e clicar no ModePill. O store deve reverter e o toast deve aparecer.

---

Após corrigir os 3 itens, faça um commit:
git add .
git commit -m "fix(fase-1): WizardStepper extraído, useUserPlan isolado, toast de erro em sync Supabase"

A Fase 1 só estará 100% concluída após esse commit.