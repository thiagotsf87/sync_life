<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SyncLife — Protótipo de Navegação v3 · Paleta Esmeralda</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

/* ── TOKENS — SyncLife Emerald System ── */
:root {
  /* Dark Foco: Navy profundo — premium fintech */
  --bg:   #03071a;
  --s1:   #07112b;
  --s2:   #0c1a3a;
  --s3:   #132248;
  --border:   rgba(255,255,255,0.06);
  --border-h: rgba(255,255,255,0.13);
  --t1:   #dff0ff;
  --t2:   #6e90b8;
  --t3:   #2e4a6e;

  /* Brand: Esmeralda */
  --em:         #10b981;
  --em-glow:    rgba(16,185,129,0.16);
  /* Jornada accent: Azul elétrico */
  --el:         #0055ff;
  --el-glow:    rgba(0,85,255,0.16);
  /* Módulos */
  --fin:         #10b981;   /* esmeralda */
  --fin-glow:    rgba(16,185,129,0.16);
  --meta:        #0055ff;   /* azul elétrico */
  --meta-glow:   rgba(0,85,255,0.16);
  --agenda:      #06b6d4;   /* ciano */
  --agenda-glow: rgba(6,182,212,0.16);
  --cfg:         #64748b;
  --cfg-glow:    rgba(100,116,139,0.12);

  --green:  #10b981;
  --yellow: #f59e0b;
  --red:    #f43f5e;

  --module-bar: 58px;
  --sb-open:    228px;
  --sb-closed:  0px;
  --header-h:   54px;
}

/* ── DARK JORNADA: Verde-escuro profundo + azul elétrico ── */
body.jornada {
  --bg:       #020d08;
  --s1:       #061410;
  --s2:       #0b1e18;
  --s3:       #112b22;
  --border:   rgba(16,185,129,0.08);
  --border-h: rgba(16,185,129,0.18);
  --t1:       #d6faf0;
  --t2:       #4da888;
  --t3:       #235c48;
}
body.jornada .header {
  background: linear-gradient(90deg, rgba(16,185,129,0.06), transparent 60%);
}
/* Score e elementos de destaque usam azul elétrico no Jornada */
body.jornada .score-num {
  background: linear-gradient(135deg, #10b981, #0055ff);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
body.jornada .score-bar-fill {
  background: linear-gradient(90deg, #10b981, #0055ff);
}
body.jornada .sb-score {
  border-color: rgba(16,185,129,0.22);
  background: linear-gradient(135deg, rgba(16,185,129,0.10), rgba(0,85,255,0.10));
}
body.jornada .sb-score-num {
  background: linear-gradient(135deg, #10b981, #0055ff);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
body.jornada .sb-score-fill { background: linear-gradient(90deg, #10b981, #0055ff); }
body.jornada .score-hero {
  background: linear-gradient(135deg, rgba(16,185,129,0.10), rgba(0,85,255,0.12));
  border-color: rgba(16,185,129,0.22);
}
body.jornada .ai-card {
  background: linear-gradient(135deg, rgba(16,185,129,0.07), rgba(0,85,255,0.07));
  border-color: rgba(16,185,129,0.18);
}
body.jornada .ai-card-lbl { color: #10b981; }
body.jornada .hd-greeting-name {
  background: linear-gradient(90deg, #10b981, #0055ff);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
/* Dark Jornada — component overrides */
body.jornada .demo-card {
  border-color: rgba(16,185,129,0.12);
  background: linear-gradient(135deg, rgba(6,20,16,0.9), rgba(11,30,24,0.95));
}
body.jornada .demo-card:hover { border-color: rgba(16,185,129,0.24); }
body.jornada .agenda-wrap { border-color: rgba(16,185,129,0.12); }
body.jornada .agenda-day-hd { background: linear-gradient(180deg, rgba(16,185,129,0.05), transparent); }
body.jornada .day-num.today { background: #10b981; }

/* ── LIGHT FOCO: Branco limpo com esmeralda ── */
body.light {
  --bg:       #e6eef5;
  --s1:       #ffffff;
  --s2:       #f0f6fa;
  --s3:       #e0eaf3;
  --border:   rgba(3,7,26,0.09);
  --border-h: rgba(3,7,26,0.18);
  --t1:       #03071a;
  --t2:       #1e3a5c;
  --t3:       #5a7a9e;
  --fin-glow:    rgba(16,185,129,0.12);
  --meta-glow:   rgba(0,85,255,0.12);
  --agenda-glow: rgba(6,182,212,0.12);
  --cfg-glow:    rgba(100,116,139,0.10);
}
/* Module bar: esmeralda escuro — ancora visual, não tudo branco */
body.light .module-bar {
  background: linear-gradient(180deg, #083d2c 0%, #052b1e 100%);
  box-shadow: 2px 0 24px rgba(8,61,44,0.28);
}
body.light .module-bar .module-btn { color: rgba(255,255,255,0.42); }
body.light .module-bar .module-btn:hover { background: rgba(255,255,255,0.09); color: rgba(255,255,255,0.85); }
body.light .module-bar .module-btn.act-fin,
body.light .module-bar .module-btn.act-meta,
body.light .module-bar .module-btn.act-agenda,
body.light .module-bar .module-btn.act-home {
  color: #6ee7b7; background: rgba(110,231,183,0.12);
}
body.light .module-bar .user-avatar { border-color: rgba(255,255,255,0.28); }
/* stop-color overrides removed */
/* Logo: transparent bg in light — module bar color shows through */
body.light .logo-mark svg rect { fill: transparent; }
/* Ensure brand gradient stays emerald→blue in light (not affected by module bar color) */
body.light .logo-mark { background: linear-gradient(135deg, #051c14, #03091f); border-radius: 9px; }
/* Sidebar: off-white levemente esmaecida com toque esmeralda */
body.light .sidebar {
  background: #f5fbf8;
  border-right: 1px solid rgba(16,185,129,0.16);
  box-shadow: 2px 0 20px rgba(16,185,129,0.06);
}
body.light .sidebar .sb-mod-label { color: #083d2c; }
body.light .sidebar .sb-section-label { color: #4da888; }
body.light .sidebar .sb-toggle { color: #4da888; }
/* Cards: branco puro com sombra para destacar sobre fundo cinza */
body.light .demo-card {
  background: #ffffff;
  box-shadow: 0 2px 12px rgba(3,7,26,0.08);
  border-color: rgba(3,7,26,0.07);
}
body.light .nav-item { color: #1a5c42; }
body.light .nav-item:hover { background: rgba(16,185,129,0.07); color: #083d2c; }
body.light .nav-item.act-fin,
body.light .nav-item.act-meta,
body.light .nav-item.act-agenda,
body.light .nav-item.act-home { background: rgba(16,185,129,0.10); color: #10b981; }
body.light .controls {
  background: #ffffff;
  box-shadow: 0 4px 24px rgba(3,7,26,0.12);
}
body.light .ctrl-btn { background: var(--s2); color: #1e3a5c; border-color: rgba(3,7,26,0.10); }
body.light .ctrl-btn:hover { background: var(--s3); color: #03071a; }
body.light .tip { background: #03071a; border-color: rgba(0,0,0,0.2); color: #dff0ff; }
body.light .tip::before { background: #03071a; border-color: rgba(0,0,0,0.2); }
body.light .score-hero {
  background: linear-gradient(135deg, rgba(16,185,129,0.07), rgba(0,85,255,0.07));
  border-color: rgba(16,185,129,0.18);
}
body.light .ai-card {
  background: linear-gradient(135deg, rgba(16,185,129,0.06), rgba(0,85,255,0.05));
  border-color: rgba(16,185,129,0.14);
}
body.light .score-bar-bg { background: rgba(0,0,0,0.08); }
body.light .agenda-wrap { background: #fff; border-color: rgba(3,7,26,0.08); }
body.light .agenda-col, body.light .cell,
body.light .agenda-days-header, body.light .agenda-time-col,
body.light .time-slot { border-color: rgba(3,7,26,0.07); }
body.light .header {
  background: linear-gradient(90deg, rgba(16,185,129,0.07) 0%, #ffffff 35%);
  border-color: rgba(16,185,129,0.10);
}
body.light .mode-pill { background: var(--s2); border-color: rgba(3,7,26,0.12); }
body.light .mode-pill:hover { background: var(--s3); }
body.light .theme-pill { background: var(--s2); border-color: rgba(3,7,26,0.12); }
body.light .theme-pill:hover { background: var(--s3); }
body.light .sb-score { border-color: rgba(16,185,129,0.20); }
body.light .annotation { background: rgba(245,158,11,0.07); }

/* ── LIGHT + JORNADA: Mint vibrante + azul elétrico ── */
body.light.jornada {
  --bg:       #c8f0e4;   /* mint saturado — página vibrante */
  --s1:       #ffffff;
  --s2:       #e0f7ef;
  --s3:       #c4eede;
  --border:   rgba(5,80,56,0.12);
  --border-h: rgba(5,80,56,0.24);
  --t1:       #022016;
  --t2:       #0d5c3e;
  --t3:       #4da888;
}
/* Sidebar: gradiente esmeralda → azul elétrico — identidade forte */
body.light.jornada .module-bar {
  background: linear-gradient(180deg, #0c9e6e 0%, #0844cc 100%);
  box-shadow: 2px 0 24px rgba(5,80,56,0.20);
}
body.light.jornada .module-bar .module-btn { color: rgba(255,255,255,0.65); }
body.light.jornada .module-bar .module-btn:hover {
  background: rgba(255,255,255,0.15); color: #ffffff;
}
body.light.jornada .module-bar .module-btn.act-fin,
body.light.jornada .module-bar .module-btn.act-meta,
body.light.jornada .module-bar .module-btn.act-agenda,
body.light.jornada .module-bar .module-btn.act-home { color: #ffffff; }
body.light.jornada .module-bar .logo-mark svg path,
body.light.jornada .module-bar .logo-mark svg polyline,
body.light.jornada .module-bar .logo-mark svg circle { stroke: #fff; }
body.light.jornada .module-bar .user-avatar { border-color: rgba(255,255,255,0.4); }
body.light.jornada .sidebar {
  background: linear-gradient(180deg, #0fbe82 0%, #0a56d6 100%);
  box-shadow: 2px 0 24px rgba(5,80,56,0.16);
}
body.light.jornada .nav-item { color: rgba(255,255,255,0.75); }
body.light.jornada .nav-item:hover { background: rgba(255,255,255,0.15); color: #ffffff; }
body.light.jornada .nav-item.act-fin,
body.light.jornada .nav-item.act-meta,
body.light.jornada .nav-item.act-agenda,
body.light.jornada .nav-item.act-home {
  background: rgba(255,255,255,0.20); color: #ffffff;
}
body.light.jornada .sb-mod-label { color: #ffffff; }
body.light.jornada .sb-section-label { color: rgba(255,255,255,0.45); }
body.light.jornada .sb-toggle { color: rgba(255,255,255,0.5); }
body.light.jornada .sb-toggle:hover { background: rgba(255,255,255,0.15); color: #fff; }
body.light.jornada .collapse-btn { color: rgba(255,255,255,0.5); }
/* Score na sidebar: transparente sobre gradiente */
body.light.jornada .sb-score {
  background: rgba(255,255,255,0.18);
  border-color: rgba(255,255,255,0.30);
}
body.light.jornada .sb-score-label { color: rgba(255,255,255,0.6); }
body.light.jornada .sb-score-num { background: linear-gradient(135deg, #ffffff, #c4f8e8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
body.light.jornada .sb-score-fill { background: linear-gradient(90deg, rgba(255,255,255,0.9), rgba(196,248,232,0.8)); }
body.light.jornada .sb-score-delta { color: rgba(255,255,255,0.8); }
body.light.jornada .nav-badge { background: rgba(255,255,255,0.20); color: rgba(255,255,255,0.9); }
/* Header com faixa mint */
body.light.jornada .header {
  /* Header acompanha o gradiente da sidebar: esmeralda → azul elétrico */
  background: linear-gradient(90deg, #0fbe82 0%, #0a56d6 100%);
  border-color: transparent;
}
/* Textos no header claro-jornada ficam brancos sobre gradiente colorido */
body.light.jornada .hd-breadcrumb,
body.light.jornada .hd-breadcrumb .mod-name,
body.light.jornada #hdPageName,
body.light.jornada .hd-breadcrumb .sep { color: rgba(255,255,255,0.85); }
body.light.jornada .hd-greeting-name {
  background: linear-gradient(90deg, #ffffff, #c4f8e8);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
body.light.jornada .hd-greeting-phrase { color: rgba(255,255,255,0.65); }
body.light.jornada .expand-from-bar { 
  color: rgba(255,255,255,0.7); 
  border-color: rgba(255,255,255,0.25);
  background: rgba(255,255,255,0.12);
}
body.light.jornada .expand-from-bar:hover { background: rgba(255,255,255,0.22); color: #fff; }
body.light.jornada .hd-notif { 
  color: rgba(255,255,255,0.7); 
  border-color: rgba(255,255,255,0.25);
  background: rgba(255,255,255,0.10);
}
body.light.jornada .hd-notif:hover { background: rgba(255,255,255,0.20); color: #fff; }
body.light.jornada .notif-dot { border-color: transparent; }
body.light.jornada .mode-pill {
  background: rgba(255,255,255,0.18);
  border-color: rgba(255,255,255,0.30);
  color: rgba(255,255,255,0.9);
}
body.light.jornada .mode-pill:hover { background: rgba(255,255,255,0.28); }
body.light.jornada .theme-pill {
  background: rgba(255,255,255,0.18);
  border-color: rgba(255,255,255,0.30);
  color: rgba(255,255,255,0.9);
}
body.light.jornada .theme-pill:hover { background: rgba(255,255,255,0.28); }
/* Cards: branco puro — máximo contraste sobre mint */
body.light.jornada .demo-card {
  background: #ffffff;
  box-shadow: 0 2px 16px rgba(5,80,56,0.10);
  border-color: rgba(5,80,56,0.10);
}
body.light.jornada .ai-card {
  background: linear-gradient(135deg, rgba(16,185,129,0.06), rgba(0,85,255,0.06));
  border-color: rgba(16,185,129,0.18);
}
body.light.jornada .score-hero {
  background: linear-gradient(135deg, rgba(16,185,129,0.08), rgba(0,85,255,0.08));
  border-color: rgba(16,185,129,0.20);
}
body.light.jornada .controls {
  background: #e8f9f2;
  border-color: rgba(5,80,56,0.15);
  box-shadow: 0 4px 24px rgba(5,80,56,0.14);
}
body.light.jornada .ctrl-btn {
  background: rgba(255,255,255,0.7); color: #0d5c3e; border-color: rgba(5,80,56,0.15);
}
body.light.jornada .ctrl-btn:hover { background: #ffffff; color: #022016; }
body.light.jornada .hd-greeting-name {
  background: linear-gradient(90deg, #0c9e6e, #0055ff);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
body.light.jornada .expand-from-bar { color: #0d5c3e; border-color: rgba(5,80,56,0.2); }
body.light.jornada .hd-notif { color: #0d5c3e; border-color: rgba(5,80,56,0.15); }
body.light.jornada .mode-pill { background: rgba(255,255,255,0.6); border-color: rgba(5,80,56,0.15); color: #0d5c3e; }
body.light.jornada .theme-pill { background: rgba(255,255,255,0.6); border-color: rgba(5,80,56,0.15); color: #0d5c3e; }
body.light.jornada .annotation { background: rgba(245,158,11,0.08); }

/* ── THEME PILL BUTTON ── */
.theme-pill {
  display: flex; align-items: center; gap: 5px;
  padding: 5px 10px; border-radius: 20px;
  border: 1px solid var(--border);
  background: var(--s2); cursor: pointer;
  font-size: 12px; color: var(--t2);
  transition: all 0.15s; user-select: none;
  font-family: 'DM Sans', sans-serif;
}
.theme-pill:hover { border-color: var(--border-h); background: var(--s3); }

/* ── DARK JORNADA ── */
/* purple jornada block removed */

/* Theme toggle button */
.theme-btn {
  width: 32px; height: 32px;
  border-radius: 9px; border: 1px solid var(--border);
  background: transparent; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  color: var(--t3); font-size: 15px;
  transition: background 0.15s, color 0.15s, border-color 0.15s;
  flex-shrink: 0;
}
.theme-btn:hover { background: var(--s3); color: var(--t2); border-color: var(--border-h); }

html, body { height:100%; overflow:hidden; }
body {
  font-family: 'DM Sans', sans-serif;
  background: var(--bg);
  color: var(--t1);
  font-size: 14px;
  line-height: 1.5;
  transition: background 0.4s, color 0.3s;
}

/* ══════════════════════════════════
   SHELL
══════════════════════════════════ */
.app { display:flex; height:100vh; overflow:hidden; }

/* ── MODULE BAR ── */
.module-bar {
  width: var(--module-bar);
  height: 100vh;
  background: var(--s1);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 12px 0;
  gap: 2px;
  z-index: 60;
  flex-shrink: 0;
  transition: background 0.4s, border-color 0.3s;
}

/* ── LOGO: símbolo de dois arcos sincronizados ── */
.logo-mark {
  width: 34px; height: 34px;
  margin-bottom: 14px;
  cursor: pointer;
  position: relative;
  flex-shrink: 0;
}
.logo-mark svg { width:34px; height:34px; }

.module-btn {
  width: 42px; height: 42px;
  border-radius: 12px;
  border: none;
  background: transparent;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  position: relative;
  transition: background 0.15s, color 0.15s, transform 0.1s;
  color: var(--t3);
}
.module-btn svg { width: 21px; height: 21px; }
.module-btn:hover { background: var(--s3); color: var(--t2); transform: scale(1.05); }

.module-btn.act-fin    { background: var(--fin-glow);    color: var(--fin);    }
.module-btn.act-meta   { background: var(--meta-glow);   color: var(--meta);   }
.module-btn.act-agenda { background: var(--agenda-glow); color: var(--agenda); }
.module-btn.act-home   { background: rgba(238,242,255,.1); color: var(--t1);   }
.module-btn.act-cfg    { background: var(--cfg-glow);    color: var(--cfg);    }

/* Pill indicator */
.module-btn::before {
  content: '';
  position: absolute;
  left: -8px; top: 50%; transform: translateY(-50%);
  width: 3px; height: 0;
  border-radius: 0 3px 3px 0;
  background: currentColor;
  transition: height 0.2s cubic-bezier(.4,0,.2,1);
}
.module-btn.act-fin::before, .module-btn.act-meta::before,
.module-btn.act-agenda::before, .module-btn.act-home::before { height: 22px; }

.module-bar .spacer { flex: 1; }

.user-avatar {
  width: 32px; height: 32px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--em,#10b981), var(--el,#0055ff));
  display: flex; align-items: center; justify-content: center;
  font-family: 'Syne', sans-serif;
  font-weight: 700; font-size: 12px; color: #fff;
  cursor: pointer;
  border: 2px solid var(--border);
  transition: border-color 0.15s;
  margin-top: 6px;
}
.user-avatar:hover { border-color: var(--border-h); }

/* ── TOOLTIP (module bar) ── */
.tip {
  position: fixed;
  left: calc(var(--module-bar) + 8px);
  background: var(--s3);
  border: 1px solid var(--border-h);
  border-radius: 8px;
  padding: 5px 10px;
  font-size: 12px;
  font-weight: 500;
  color: var(--t1);
  pointer-events: none;
  z-index: 999;
  white-space: nowrap;
  opacity: 0;
  transition: opacity 0.12s;
  transform: translateY(-50%);
  box-shadow: 0 4px 16px rgba(0,0,0,0.3);
}
.tip.show { opacity: 1; }
.tip::before {
  content: '';
  position: absolute;
  left: -5px; top: 50%; transform: translateY(-50%);
  width: 8px; height: 8px;
  background: var(--s3);
  border-left: 1px solid var(--border-h);
  border-bottom: 1px solid var(--border-h);
  transform: translateY(-50%) rotate(45deg);
}

/* ── SIDEBAR (nível 2) ── */
.sidebar {
  width: var(--sb-open);
  height: 100vh;
  background: var(--s1);
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  overflow: hidden;
  flex-shrink: 0;
  transition: width 0.24s cubic-bezier(.4,0,.2,1), background 0.4s, border-color 0.3s;
}
.sidebar.closed { width: var(--sb-closed); }

.sb-header {
  height: var(--header-h);
  display: flex; align-items: center;
  padding: 0 14px;
  gap: 10px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
  overflow: hidden;
}

.sb-mod-icon {
  width: 28px; height: 28px;
  border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
}
.sb-mod-icon svg { width: 15px; height: 15px; }

.sb-mod-label {
  font-family: 'Syne', sans-serif;
  font-size: 13px; font-weight: 700;
  white-space: nowrap;
  letter-spacing: 0.02em;
  flex: 1;
}

/* Toggle button — ícone muda conforme estado */
.sb-toggle {
  width: 26px; height: 26px;
  border-radius: 7px; border: none;
  background: transparent; cursor: pointer;
  color: var(--t3);
  display: flex; align-items: center; justify-content: center;
  transition: background 0.15s, color 0.15s;
  flex-shrink: 0;
}
.sb-toggle:hover { background: var(--s3); color: var(--t2); }
.sb-toggle svg { width: 15px; height: 15px; }

/* Expand button — fica na module bar quando sidebar fechada */
.expand-btn {
  display: none;
  width: 26px; height: 26px;
  border-radius: 7px; border: 1px solid var(--border);
  background: var(--s2); cursor: pointer;
  color: var(--t3);
  align-items: center; justify-content: center;
  transition: background 0.15s, color 0.15s, border-color 0.15s;
  flex-shrink: 0;
  margin-top: 6px;
}
.expand-btn:hover { background: var(--s3); color: var(--t2); border-color: var(--border-h); }
.expand-btn svg { width: 14px; height: 14px; }
.sidebar.closed ~ .main .expand-from-bar { display: flex; }

/* Jornada score block */
.sb-score {
  margin: 10px 10px 0;
  padding: 12px;
  border-radius: 12px;
  border: 1px solid rgba(16,185,129,0.22);
  background: linear-gradient(135deg, rgba(16,185,129,0.10), rgba(0,85,255,0.10));
  overflow: hidden;
  flex-shrink: 0;
  display: none; /* shown only in jornada */
}
body.jornada .sb-score { display: block; }

.sb-score-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
.sb-score-num {
  font-family: 'Syne', sans-serif;
  font-size: 32px; font-weight: 800;
  background: linear-gradient(135deg, var(--fin), #f59e0b);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  line-height: 1;
}
.sb-score-label { font-size: 9px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.1em; color: var(--t3); margin-top: 2px; }
.sb-score-delta { font-size: 11px; color: var(--green); }
.sb-score-bar { height: 4px; background: rgba(255,255,255,0.08); border-radius: 2px; overflow: hidden; }
.sb-score-fill { height: 100%; width: 74%; background: linear-gradient(90deg, var(--fin), #f59e0b); border-radius: 2px; }

/* Sidebar nav */
.sb-nav { flex: 1; padding: 8px; overflow-y: auto; overflow-x: hidden; }
.sb-section-label {
  font-size: 10px; font-weight: 700;
  text-transform: uppercase; letter-spacing: 0.08em;
  color: var(--t3); padding: 8px 8px 4px;
  white-space: nowrap;
}
.nav-item {
  display: flex; align-items: center; gap: 10px;
  padding: 8px 10px; border-radius: 10px;
  cursor: pointer; color: var(--t2);
  transition: background 0.12s, color 0.12s;
  border: none; background: transparent;
  width: 100%; text-align: left;
  white-space: nowrap;
  position: relative;
  font-family: 'DM Sans', sans-serif;
  font-size: 13px;
}
.nav-item svg { width: 16px; height: 16px; flex-shrink: 0; }
.nav-item:hover { background: var(--s3); color: var(--t1); }
.nav-item.act-fin    { background: var(--fin-glow);    color: var(--fin);    font-weight:500; }
.nav-item.act-meta   { background: var(--meta-glow);   color: var(--meta);   font-weight:500; }
.nav-item.act-agenda { background: var(--agenda-glow); color: var(--agenda); font-weight:500; }
.nav-item.act-home   { background: rgba(238,242,255,.08); color: var(--t1); font-weight:500; }

.nav-badge {
  margin-left: auto;
  font-size: 9px; font-weight: 700;
  padding: 2px 6px; border-radius: 8px;
}
.badge-y { background: rgba(245,158,11,.15); color: var(--yellow); }
.badge-r { background: rgba(244,63,94,.15);  color: var(--red);    }
.badge-pro {
  background: linear-gradient(135deg, var(--em,#10b981), var(--el,#0055ff));
  color: #fff; font-size: 9px; font-weight:700;
  padding: 2px 5px; border-radius: 4px; letter-spacing:.04em;
}

/* ── MAIN ── */
.main { flex:1; display:flex; flex-direction:column; overflow:hidden; min-width:0; }

/* ── HEADER ── */
.header {
  height: var(--header-h);
  display: flex; align-items: center;
  padding: 0 20px; gap: 12px;
  border-bottom: 1px solid var(--border);
  flex-shrink: 0;
  transition: background 0.4s, border-color 0.3s;
}

/* expand btn from bar (when sidebar closed) */
.expand-from-bar {
  display: none;
  width: 28px; height: 28px;
  border-radius: 8px; border: 1px solid var(--border);
  background: transparent; cursor: pointer;
  color: var(--t3); align-items: center; justify-content: center;
  transition: background 0.15s, color 0.15s;
  flex-shrink: 0;
}
.expand-from-bar:hover { background: var(--s3); color: var(--t2); }
.expand-from-bar svg { width: 15px; height: 15px; }

/* Breadcrumb */
.hd-breadcrumb {
  display: flex; align-items: center; gap: 6px;
  font-size: 13px; color: var(--t3);
}
.hd-breadcrumb .mod-name { color: var(--t1); font-weight: 600; }
.hd-breadcrumb .sep { opacity: 0.4; }

/* Jornada greeting */
.hd-greeting { display: none; }
body.jornada .hd-greeting { display: flex; flex-direction: column; }
body.jornada .hd-breadcrumb { display: none; }
.hd-greeting-name {
  font-size: 14px; font-weight: 600;
  background: linear-gradient(90deg, var(--t1), #10b981);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.hd-greeting-phrase { font-size: 11px; color: var(--t3); }

.hd-spacer { flex: 1; }

/* Mode toggle */
.mode-pill {
  display: flex; align-items: center; gap: 7px;
  padding: 5px 12px 5px 8px;
  border-radius: 20px;
  border: 1px solid var(--border);
  background: var(--s2);
  cursor: pointer;
  font-size: 12px; color: var(--t2);
  transition: border-color 0.2s, background 0.2s;
  user-select: none;
}
.mode-pill:hover { border-color: var(--border-h); background: var(--s3); }
.mode-pill-dot {
  width: 18px; height: 18px;
  border-radius: 6px;
  display: flex; align-items: center; justify-content: center;
  background: rgba(16,185,129,0.15);
  color: #10b981;
  font-size: 11px;
  transition: background 0.3s, color 0.3s;
}
body.jornada .mode-pill-dot { background: rgba(16,185,129,0.18); color: #10b981; }
body.jornada .mode-pill { border-color: rgba(16,185,129,0.15); }

/* Jornada header pulse */


/* Notif btn */
.hd-notif {
  width: 34px; height: 34px;
  border-radius: 10px; border: 1px solid var(--border);
  background: transparent; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  color: var(--t3); position: relative;
  transition: background 0.15s, color 0.15s;
}
.hd-notif:hover { background: var(--s3); color: var(--t2); }
.hd-notif svg { width: 17px; height: 17px; }
.notif-dot {
  position: absolute; top: 8px; right: 8px;
  width: 6px; height: 6px; border-radius: 50%;
  background: var(--red); border: 1.5px solid var(--bg);
}

/* ── CONTENT ── */
.content { flex:1; overflow-y:auto; padding: 22px; }
.content-inner { animation: fadeUp 0.2s ease both; }
@keyframes fadeUp { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:translateY(0); } }

/* ── JORNADA VISUAL OVERRIDES for content ── */



/* Page headings */
.page-title {
  font-family: 'Syne', sans-serif;
  font-size: 22px; font-weight: 800;
  color: var(--t1); margin-bottom: 2px;
  transition: color 0.3s;
}
body.jornada .page-title {
  background: linear-gradient(90deg, var(--t1), #10b981);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.page-sub { font-size: 13px; color: var(--t3); margin-bottom: 22px; }

/* Cards */
.cards-row { display: grid; grid-template-columns: repeat(3,1fr); gap: 12px; margin-bottom: 14px; }
.demo-card {
  background: var(--s1);
  border: 1px solid var(--border);
  border-radius: 14px; padding: 18px;
  transition: border-color 0.15s, background 0.4s;
  cursor: default;
}
.demo-card:hover { border-color: var(--border-h); }
.card-lbl { font-size: 11px; text-transform: uppercase; letter-spacing: .07em; color: var(--t3); margin-bottom: 8px; }
.card-val { font-family: 'DM Mono', monospace; font-size: 22px; font-weight: 500; color: var(--t1); }
.card-val.g { color: var(--green); }
.card-val.r { color: var(--red); }
.card-delta { font-size: 11px; color: var(--t3); margin-top: 4px; }

/* Score card (jornada dashboard) */
.score-hero {
  display: flex; align-items: center; gap: 24px;
  padding: 24px;
  background: linear-gradient(135deg, rgba(16,185,129,0.10), rgba(0,85,255,0.12));
  border: 1px solid rgba(16,185,129,0.22);
  border-radius: 16px; margin-bottom: 16px;
  animation: fadeUp 0.3s ease both;
}
.score-num {
  font-family: 'Syne', sans-serif;
  font-size: 72px; font-weight: 800; line-height: 1;
  background: linear-gradient(135deg, #10b981, #0055ff);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
}
.score-right { flex: 1; }
.score-title { font-family: 'Syne', sans-serif; font-size: 16px; font-weight: 700; color: var(--t1); margin-bottom: 4px; }
.score-phrase { font-size: 13px; color: var(--t3); font-style: italic; margin-bottom: 12px; }
.score-bar-bg { height: 6px; background: rgba(255,255,255,0.07); border-radius: 3px; overflow: hidden; }
.score-bar-fill { height: 100%; width: 74%; background: linear-gradient(90deg, var(--fin), #f59e0b); border-radius: 3px; }
.score-components { display: flex; gap: 20px; margin-top: 10px; }
.score-comp { font-size: 11px; color: var(--t3); }
.score-comp strong { color: var(--t2); }

/* AI card */
.ai-card {
  background: linear-gradient(135deg, rgba(16,185,129,0.06), rgba(0,85,255,0.06));
  border: 1px solid rgba(16,185,129,0.16);
  border-radius: 14px; padding: 18px;
  margin-bottom: 14px;
}
.ai-card-lbl { font-size: 11px; text-transform: uppercase; letter-spacing:.07em; color: var(--em,#10b981); margin-bottom: 8px; }
.ai-card-body { font-size: 13px; color: var(--t2); line-height: 1.7; }
.ai-card-body strong { color: var(--t1); }

/* Annotation */
.annotation {
  display: inline-flex; align-items: center; gap: 6px;
  background: rgba(245,158,11,0.08);
  border: 1px dashed rgba(245,158,11,0.3);
  border-radius: 6px; padding: 3px 9px;
  font-size: 11px; color: var(--yellow);
  margin-bottom: 14px; cursor: default;
}

/* ══════════════════════════════════
   AGENDA — grade de horários
══════════════════════════════════ */
.agenda-wrap {
  display: flex; gap: 0;
  height: calc(100vh - var(--header-h) - 110px);
  overflow: hidden;
  border: 1px solid var(--border);
  border-radius: 14px;
}
.agenda-time-col {
  width: 52px; flex-shrink: 0;
  overflow: hidden;
  border-right: 1px solid var(--border);
}
.agenda-time-col .time-header {
  height: 42px; border-bottom: 1px solid var(--border);
  flex-shrink: 0;
}
.time-slots { overflow-y: auto; }
.time-slot {
  height: 56px; display: flex; align-items: flex-start;
  padding: 4px 6px 0;
  font-size: 10px; color: var(--t3);
  border-bottom: 1px solid var(--border);
  font-family: 'DM Mono', monospace;
}
.agenda-grid { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
.agenda-days-header {
  display: grid; grid-template-columns: repeat(7,1fr);
  height: 42px; flex-shrink: 0;
  border-bottom: 1px solid var(--border);
}
.agenda-day-hd {
  display: flex; flex-direction: column; align-items: center;
  justify-content: center; gap: 2px;
  border-right: 1px solid var(--border);
  padding: 4px;
}
.agenda-day-hd:last-child { border-right: none; }
.day-name { font-size: 10px; color: var(--t3); text-transform: uppercase; letter-spacing:.05em; }
.day-num {
  width: 26px; height: 26px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-family: 'Syne', sans-serif; font-size: 13px; font-weight: 700;
  color: var(--t2);
}
.day-num.today { background: var(--fin); color: #fff; }

.agenda-body { flex: 1; overflow-y: auto; overflow-x: hidden; }
.agenda-cols {
  display: grid; grid-template-columns: repeat(7,1fr);
  min-height: 100%;
}
.agenda-col {
  border-right: 1px solid var(--border);
  position: relative;
}
.agenda-col:last-child { border-right: none; }
.cell {
  height: 56px;
  border-bottom: 1px solid var(--border);
  position: relative;
}
.evt {
  position: absolute; left: 3px; right: 3px;
  border-radius: 6px;
  padding: 3px 6px;
  font-size: 10px; font-weight: 500;
  cursor: pointer; overflow: hidden;
  transition: opacity 0.12s, transform 0.12s;
  z-index: 2;
}
.evt:hover { opacity: 0.85; transform: scale(1.01); }
.evt-name { color: #fff; line-height: 1.3; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.evt-time { color: rgba(255,255,255,0.6); font-size: 9px; }

/* Current time indicator */
.time-now {
  position: absolute; left: 0; right: 0;
  height: 1px; background: var(--red);
  z-index: 5;
}
.time-now::before {
  content: '';
  position: absolute; left: -4px; top: -4px;
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--red);
}

/* Jornada agenda tint */


body.jornada .day-num.today { background: var(--meta); }

/* ══════════════════════════════════
   CONTROLS
══════════════════════════════════ */
.controls {
  position: fixed; bottom: 20px; right: 20px;
  background: var(--s2); border: 1px solid var(--border-h);
  border-radius: 16px; padding: 14px; z-index: 999;
  display: flex; flex-direction: column; gap: 10px;
  min-width: 210px;
  box-shadow: 0 8px 40px rgba(0,0,0,0.5);
}
.ctrl-title { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing:.1em; color: var(--t3); }
.ctrl-row { display: flex; flex-direction: column; gap: 5px; }
.ctrl-lbl { font-size: 11px; color: var(--t3); font-weight: 500; }
.ctrl-grp { display: flex; gap: 6px; flex-wrap: wrap; }
.ctrl-btn {
  padding: 5px 11px; border-radius: 8px;
  border: 1px solid var(--border); background: var(--s3);
  color: var(--t2); font-size: 12px;
  font-family: 'DM Sans', sans-serif; cursor: pointer;
  transition: all 0.15s;
}
.ctrl-btn:hover { border-color: var(--border-h); color: var(--t1); }
.ctrl-btn.on-fin    { background: var(--fin-glow);    color: var(--fin);    border-color: rgba(16,185,129,.3); }
.ctrl-btn.on-meta   { background: var(--meta-glow);   color: var(--meta);   border-color: rgba(0,85,255,.3);}
.ctrl-btn.on-agenda { background: var(--agenda-glow); color: var(--agenda); border-color: rgba(6,182,212,.3); }
.ctrl-btn.on-home   { background: rgba(238,242,255,.08); color: var(--t1); border-color: rgba(238,242,255,.15);}
.ctrl-btn.on-jornada { background: rgba(16,185,129,.12); color: #10b981; border-color: rgba(16,185,129,.25);}
.ctrl-btn.on-foco   { background: var(--fin-glow); color: var(--fin); border-color: rgba(16,185,129,.3); }
.divider { height: 1px; background: var(--border); }

/* ══════════════════════════════════
   MOBILE
══════════════════════════════════ */
.mob-bar {
  display: none; position: fixed;
  bottom: 0; left: 0; right: 0;
  height: 64px; padding: 0 4px;
  background: var(--s1); border-top: 1px solid var(--border);
  align-items: center; justify-content: space-around;
  z-index: 200;
}
.mob-tab {
  display: flex; flex-direction: column; align-items: center; gap: 3px;
  padding: 6px 14px; border-radius: 12px;
  cursor: pointer; border: none; background: transparent;
  color: var(--t3); transition: color 0.15s;
}
.mob-tab svg { width: 22px; height: 22px; }
.mob-tab span { font-size: 10px; font-weight: 500; }
.mob-tab.act-fin { color: var(--fin); }
.mob-tab.act-meta { color: var(--meta); }
.mob-tab.act-agenda { color: var(--agenda); }
.mob-tab.act-home { color: var(--t1); }

@media (max-width: 768px) {
  .module-bar, .sidebar { display: none; }
  .mob-bar { display: flex; }
  .content { padding-bottom: 76px; }
  .controls { bottom: 76px; right: 10px; min-width: 190px; }
  .cards-row { grid-template-columns: 1fr 1fr; }
  .agenda-wrap { height: calc(100vh - 200px); }
}

/* ═══ AGENDA ═══ */
.ag-page { display:flex; flex-direction:column; height:100%; overflow:hidden; }
.ag-hd { display:flex; align-items:center; justify-content:space-between; padding:20px 28px 14px; flex-shrink:0; gap:12px; flex-wrap:wrap; }
.ag-hdl { display:flex; align-items:center; gap:14px; }
.ag-title { font-family:'Syne',sans-serif; font-size:22px; font-weight:800; letter-spacing:-.02em; }
.ag-period { font-family:'DM Mono',monospace; font-size:12px; color:var(--t3); background:var(--s2); border:1px solid var(--border); border-radius:8px; padding:4px 10px; }
.ag-hdr { display:flex; align-items:center; gap:8px; }
.ag-nav { display:flex; align-items:center; gap:6px; }
.ag-nav-arrows { display:flex; align-items:center; gap:2px; background:var(--s2); border:1px solid var(--border); border-radius:9px; padding:2px; }
.ag-nb { height:28px; padding:0 10px; border-radius:7px; border:none; background:none; color:var(--t2); cursor:pointer; display:flex; align-items:center; gap:4px; font-size:12px; font-weight:500; font-family:'DM Sans',sans-serif; transition:all .15s; white-space:nowrap; }
.ag-nb:hover { background:var(--s3); color:var(--t1); }
.ag-nb svg { width:12px; height:12px; flex-shrink:0; }
.ag-today { padding:0 14px; height:32px; border-radius:9px; border:1px solid var(--agenda); background:rgba(6,182,212,.08); color:var(--agenda); font-size:12px; font-weight:700; font-family:'DM Sans',sans-serif; cursor:pointer; transition:all .15s; white-space:nowrap; }
.ag-today:hover { background:rgba(6,182,212,.18); transform:translateY(-1px); }
.ag-view-sw { display:flex; background:var(--s2); border:1px solid var(--border); border-radius:10px; padding:3px; gap:2px; }
.ag-vsw { padding:5px 14px; border-radius:7px; border:none; background:none; font-size:12px; font-weight:500; color:var(--t3); cursor:pointer; font-family:'DM Sans',sans-serif; transition:all .15s; }
.ag-vsw.on { background:var(--s1); color:var(--t1); box-shadow:0 1px 4px rgba(0,0,0,.25); }
.btn-ev { display:inline-flex; align-items:center; gap:7px; background:var(--agenda); color:#03071a; font-family:'DM Sans',sans-serif; font-weight:700; font-size:13px; padding:8px 18px; border-radius:100px; border:none; cursor:pointer; transition:all .2s; box-shadow:0 4px 16px rgba(6,182,212,.25); white-space:nowrap; }
.btn-ev:hover { transform:translateY(-1px); filter:brightness(1.07); }

/* Jornada streak */
.ag-streak { display:none; margin:0 28px 14px; padding:12px 16px; background:rgba(6,182,212,.07); border:1px solid rgba(6,182,212,.18); border-radius:14px; align-items:center; gap:14px; }
body.jornada .ag-streak { display:flex; }
.ag-streak-ico { font-size:22px; flex-shrink:0; }
.ag-streak-txt { font-size:13px; color:var(--t2); line-height:1.5; }
.ag-streak-txt strong { color:var(--t1); }

/* Legenda */
.ag-legend { display:flex; align-items:center; gap:14px; padding:0 28px 12px; flex-wrap:wrap; flex-shrink:0; }
.ag-leg-item { display:flex; align-items:center; gap:5px; font-size:11px; color:var(--t3); cursor:pointer; transition:opacity .15s; }
.ag-leg-dot { width:8px; height:8px; border-radius:2px; flex-shrink:0; }

/* ── SEMANAL ── */
.ag-week { display:flex; flex:1; overflow:hidden; margin:0 28px 20px; border:1px solid var(--border); border-radius:16px; background:var(--s1); }
.ag-time-col { width:52px; flex-shrink:0; border-right:1px solid var(--border); display:flex; flex-direction:column; }
.ag-time-top { height:56px; flex-shrink:0; border-bottom:1px solid var(--border); }
.ag-time-slots { flex:1; overflow:hidden; }
.ag-ts { display:flex; align-items:flex-start; padding-top:2px; justify-content:flex-end; padding-right:8px; font-family:'DM Mono',monospace; font-size:10px; color:var(--t3); box-sizing:border-box; }
.ag-grid { flex:1; display:flex; flex-direction:column; overflow:hidden; }
.ag-days-hd { display:grid; grid-template-columns:repeat(7,1fr); height:56px; flex-shrink:0; border-bottom:1px solid var(--border); }
.ag-day-hd { display:flex; flex-direction:column; align-items:center; justify-content:center; gap:3px; border-right:1px solid var(--border); }
.ag-day-hd:last-child { border-right:none; }
.ag-dname { font-size:10px; font-weight:700; text-transform:uppercase; letter-spacing:.06em; color:var(--t3); }
.ag-dnum { width:28px; height:28px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-family:'DM Mono',monospace; font-size:13px; font-weight:500; color:var(--t2); }
.ag-dnum.today { background:var(--agenda); color:#03071a; font-weight:700; }
.ag-dnum.weekend { color:var(--t3); }
.ag-body { flex:1; overflow-y:auto; overflow-x:hidden; }
.ag-body::-webkit-scrollbar { width:4px; }
.ag-body::-webkit-scrollbar-thumb { background:var(--s3); border-radius:2px; }
.ag-cols { display:grid; grid-template-columns:repeat(7,1fr); }
.ag-col { border-right:1px solid var(--border); position:relative; }
.ag-col:last-child { border-right:none; }
.ag-cell { border-bottom:1px solid rgba(255,255,255,.03); box-sizing:border-box; }
.ag-cell.half { border-bottom:1px dashed rgba(255,255,255,.02); }
.ag-now-line { position:absolute; left:0; right:0; height:2px; background:var(--agenda); z-index:10; border-radius:1px; }
.ag-now-line::before { content:''; position:absolute; left:-3px; top:-4px; width:10px; height:10px; border-radius:50%; background:var(--agenda); }
.ag-ev { position:absolute; left:3px; right:3px; border-radius:7px; padding:4px 7px; overflow:hidden; cursor:pointer; transition:all .15s; z-index:5; }
.ag-ev:hover { filter:brightness(1.12); transform:scale(1.02); z-index:20; }
.ag-ev-time { font-size:9px; font-weight:600; opacity:.9; font-family:'DM Mono',monospace; }
.ag-ev-name { font-size:11px; font-weight:700; line-height:1.3; color:#fff; margin-top:1px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.ag-ev-type { font-size:9px; opacity:.75; color:#fff; }
/* Light mode: fundo do card é translúcido (~13% opacidade) — texto branco fica invisível */
body.light .ag-ev-name { color:#1a1a2e; }
body.light .ag-ev-type { color:#1a1a2e; opacity:.65; }
body.light .ag-ev-time { opacity:1; }

/* ── MENSAL ── */
.ag-month { flex:1; overflow:hidden; margin:0 28px 20px; border:1px solid var(--border); border-radius:16px; background:var(--s1); display:flex; flex-direction:column; }
.ag-month-hd { display:grid; grid-template-columns:repeat(7,1fr); border-bottom:1px solid var(--border); flex-shrink:0; }
.ag-mday-hd { padding:10px 0; text-align:center; font-size:10px; font-weight:700; text-transform:uppercase; letter-spacing:.07em; color:var(--t3); border-right:1px solid var(--border); }
.ag-mday-hd:last-child { border-right:none; }
.ag-month-grid { display:grid; grid-template-columns:repeat(7,1fr); flex:1; overflow-y:auto; }
.ag-month-grid::-webkit-scrollbar { width:4px; }
.ag-month-grid::-webkit-scrollbar-thumb { background:var(--s3); border-radius:2px; }
.ag-mcell { border-right:1px solid var(--border); border-bottom:1px solid var(--border); padding:6px; min-height:96px; position:relative; transition:background .12s; cursor:pointer; overflow:hidden; }
.ag-mcell:hover { background:rgba(255,255,255,.015); }
.ag-mcell:last-child, .ag-mcell:nth-child(7n) { border-right:none; }
.ag-mcell.out { opacity:.3; }
.ag-mcell.today-cell { background:rgba(6,182,212,.04); }
.ag-mc-num { font-family:'DM Mono',monospace; font-size:12px; color:var(--t2); margin-bottom:5px; display:inline-flex; align-items:center; justify-content:center; width:22px; height:22px; border-radius:50%; }
.ag-mcell.today-cell .ag-mc-num { background:var(--agenda); color:#03071a; font-weight:700; }
.ag-mc-ev { border-radius:4px; padding:2px 6px; font-size:10px; font-weight:600; color:#fff; margin-bottom:2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; cursor:pointer; transition:filter .12s; }
.ag-mc-ev:hover { filter:brightness(1.12); }
.ag-mc-more { font-size:10px; color:var(--t3); padding:2px 6px; cursor:pointer; }
.ag-mc-more:hover { color:var(--t2); }

/* Modais */
.mov { display:none; position:fixed; inset:0; z-index:400; background:rgba(3,7,26,.8); backdrop-filter:blur(6px); align-items:center; justify-content:center; padding:24px; }
.mov.open { display:flex; }
.mbox { background:var(--s1); border:1px solid var(--border); border-radius:20px; width:100%; max-width:500px; max-height:90vh; display:flex; flex-direction:column; animation:mi .22s ease both; }
.mconf { max-width:400px!important; padding:28px; border-radius:20px; background:var(--s1); border:1px solid var(--border); animation:mi .22s ease both; }
@keyframes mi { from{opacity:0;transform:scale(.96) translateY(8px)} to{opacity:1;transform:none} }
.mhd { padding:22px 24px 0; display:flex; align-items:flex-start; justify-content:space-between; flex-shrink:0; }
.mttl { font-family:'Syne',sans-serif; font-size:19px; font-weight:800; letter-spacing:-.02em; }
.mxb { width:30px; height:30px; border-radius:8px; border:1px solid var(--border); background:none; cursor:pointer; color:var(--t3); display:flex; align-items:center; justify-content:center; transition:all .15s; flex-shrink:0; }
.mxb:hover { border-color:var(--border-h); color:var(--t1); }
.mxb svg { width:14px; height:14px; }
.mbd { padding:18px 24px; overflow-y:auto; flex:1; }
.mbd::-webkit-scrollbar { width:4px; } .mbd::-webkit-scrollbar-thumb { background:var(--s3); border-radius:2px; }
.mft { padding:14px 24px 22px; display:flex; gap:10px; justify-content:flex-end; border-top:1px solid var(--border); flex-shrink:0; }
.fl { margin-bottom:16px; }
.flbl { font-size:11px; font-weight:700; color:var(--t2); text-transform:uppercase; letter-spacing:.05em; display:block; margin-bottom:6px; }
.fin { width:100%; background:var(--s2); border:1px solid var(--border); border-radius:10px; padding:9px 13px; font-family:'DM Sans',sans-serif; font-size:13px; color:var(--t1); outline:none; transition:border-color .2s; }
.fin:focus { border-color:rgba(6,182,212,.4); }
.fin.err { border-color:rgba(244,63,94,.5)!important; }
.ferr { font-size:11px; color:#f43f5e; margin-top:4px; display:none; }
.ferr.on { display:block; }
.flrow { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.bcncl { background:none; border:1px solid var(--border); border-radius:10px; padding:9px 18px; font-size:13px; color:var(--t2); cursor:pointer; font-family:'DM Sans',sans-serif; transition:all .15s; }
.bcncl:hover { border-color:var(--border-h); color:var(--t1); }
.bsave { background:var(--agenda); color:#03071a; border:none; border-radius:10px; padding:9px 22px; font-size:13px; font-weight:700; cursor:pointer; font-family:'DM Sans',sans-serif; transition:all .15s; }
.bsave:hover { filter:brightness(1.08); }
.bdel { background:rgba(244,63,94,.1); border:1px solid rgba(244,63,94,.25); color:#f43f5e; border-radius:10px; padding:9px 18px; font-size:13px; font-weight:600; cursor:pointer; font-family:'DM Sans',sans-serif; transition:all .15s; }
.bdel:hover { background:rgba(244,63,94,.18); }
/* Type selector */
.type-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-bottom:4px; }
.type-btn { padding:9px 6px; border-radius:10px; border:1.5px solid var(--border); background:var(--s2); cursor:pointer; text-align:center; transition:all .15s; font-family:'DM Sans',sans-serif; }
.type-btn:hover { border-color:var(--border-h); }
.type-btn.sel { border-width:2px; }
.type-ico { font-size:18px; display:block; margin-bottom:3px; }
.type-lbl { font-size:11px; font-weight:600; color:var(--t2); }
.type-btn.sel .type-lbl { font-weight:700; }
/* Time row */
.time-row { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.allday-row { display:flex; align-items:center; justify-content:space-between; padding:10px 14px; background:var(--s2); border:1px solid var(--border); border-radius:10px; margin-bottom:16px; cursor:pointer; transition:border-color .2s; }
.allday-row:hover { border-color:rgba(6,182,212,.3); }
.rsw { width:40px; height:22px; border-radius:100px; background:var(--s3); border:1px solid var(--border); position:relative; flex-shrink:0; transition:all .2s; }
.rsw.on { background:rgba(6,182,212,.35); border-color:rgba(6,182,212,.5); }
.rknob { width:16px; height:16px; border-radius:50%; background:var(--t3); position:absolute; top:2px; left:2px; transition:all .2s; }
.rsw.on .rknob { left:20px; background:var(--agenda); }
/* Event detail modal */
.ev-detail-hd { display:flex; align-items:center; gap:12px; margin-bottom:16px; }
.ev-type-dot { width:12px; height:12px; border-radius:3px; flex-shrink:0; }
.ev-detail-title { font-family:'Syne',sans-serif; font-size:18px; font-weight:800; }
.ev-meta-row { display:flex; align-items:center; gap:8px; font-size:13px; color:var(--t2); margin-bottom:8px; }
.ev-meta-row svg { width:14px; height:14px; color:var(--t3); flex-shrink:0; }
.ev-desc { background:var(--s2); border:1px solid var(--border); border-radius:10px; padding:12px; font-size:13px; color:var(--t2); line-height:1.6; margin-top:12px; }
/* Confirm del */
.fico { width:48px; height:48px; border-radius:14px; display:flex; align-items:center; justify-content:center; font-size:24px; margin-bottom:14px; }
.ft { font-family:'Syne',sans-serif; font-size:18px; font-weight:800; margin-bottom:8px; }
.fd { font-size:13px; color:var(--t2); line-height:1.6; margin-bottom:18px; }
.facts { display:flex; gap:10px; }
.fcncl { flex:1; background:none; border:1px solid var(--border); border-radius:10px; padding:10px; font-size:13px; color:var(--t2); cursor:pointer; font-family:'DM Sans',sans-serif; transition:all .15s; }
.fcncl:hover { border-color:var(--border-h); color:var(--t1); }
.fok { flex:2; border:none; border-radius:10px; padding:10px; font-size:13px; font-weight:700; cursor:pointer; font-family:'DM Sans',sans-serif; }
.fok.r { background:#f43f5e; color:#fff; }
.fok.r:hover { filter:brightness(1.08); }

@media(max-width:768px){
  .ag-hd { padding:14px 14px 10px; }
  .ag-week { margin:0 8px 12px; }
  .ag-month { margin:0 8px 12px; }
  .ag-legend { padding:0 14px 10px; }
  .ag-streak { margin:0 14px 12px; }
  .ag-title { font-size:18px; }
  .ag-days-hd { display:none; }
  .type-grid { grid-template-columns:repeat(2,1fr); }
  .flrow,.time-row { grid-template-columns:1fr; }
  .mbox { border-radius:16px; }
  .mhd { padding:16px 18px 0; }
  .mbd { padding:14px 18px; }
  .mft { padding:12px 18px 18px; }
}

</style>
</head>
<body>

<!-- Tooltip element -->
<div class="tip" id="tip"></div>

<div class="app">

  <!-- ══ NÍVEL 1: BARRA DE MÓDULOS ══ -->
  <nav class="module-bar" id="moduleBar">

    <!-- Logo: dois arcos entrelaçados = sincronização -->
    <div class="logo-mark" title="SyncLife">
      <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" width="34" height="34">
        <defs>
          <linearGradient id="sl-bg" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#051c14"/>
            <stop offset="100%" stop-color="#03091f"/>
          </linearGradient>
          <linearGradient id="sl-brand" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#10b981"/>
            <stop offset="100%" stop-color="#0055ff"/>
          </linearGradient>
          <linearGradient id="sl-r1" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#10b981" stop-opacity="0.7"/>
            <stop offset="100%" stop-color="#0055ff" stop-opacity="0.7"/>
          </linearGradient>
          <linearGradient id="sl-r2" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="#10b981" stop-opacity="0.35"/>
            <stop offset="100%" stop-color="#0055ff" stop-opacity="0.35"/>
          </linearGradient>
          <filter id="sl-glow">
            <feGaussianBlur stdDeviation="8" result="blur"/>
            <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>
          <filter id="sl-sglow">
            <feGaussianBlur stdDeviation="14" result="blur"/>
            <feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
          </filter>
        </defs>
        <rect width="512" height="512" rx="112" ry="112" fill="url(#sl-bg)"/>
        <circle cx="256" cy="256" r="210" fill="none" stroke="url(#sl-r2)" stroke-width="1.5"/>
        <circle cx="256" cy="256" r="170" fill="none" stroke="url(#sl-r1)" stroke-width="2"/>
        <circle cx="256" cy="256" r="130" fill="none" stroke="url(#sl-brand)" stroke-width="2.5"/>
        <path d="M256 46 A210 210 0 0 1 466 256" fill="none" stroke="#10b981" stroke-width="3" stroke-opacity="0.5" stroke-linecap="round"/>
        <path d="M256 466 A210 210 0 0 1 46 256" fill="none" stroke="#0055ff" stroke-width="3" stroke-opacity="0.5" stroke-linecap="round"/>
        <circle cx="256" cy="256" r="108" fill="none" stroke="url(#sl-brand)" stroke-width="2.5" opacity="0.8"/>
        <g filter="url(#sl-sglow)">
          <text x="256" y="316" font-family="'Helvetica Neue','Arial',sans-serif" font-weight="800" font-size="190" text-anchor="middle" fill="url(#sl-brand)">S</text>
        </g>
        <circle cx="256" cy="86"  r="7" fill="#10b981" filter="url(#sl-glow)"/>
        <circle cx="446" cy="256" r="6" fill="#0066ff" filter="url(#sl-glow)"/>
        <circle cx="256" cy="426" r="6" fill="#0055ff" filter="url(#sl-glow)"/>
        <circle cx="66"  cy="256" r="6" fill="#10b981" filter="url(#sl-glow)"/>
      </svg>
    </div>

    <button class="module-btn act-home" id="mb-home"
      data-tip="Home"
      onclick="go('home')"
      onmouseenter="showTip(this)" onmouseleave="hideTip()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
        <path d="M3 12L12 3l9 9"/><path d="M5 10v9a1 1 0 001 1h4v-5h4v5h4a1 1 0 001-1v-9"/>
      </svg>
    </button>

    <button class="module-btn" id="mb-fin"
      data-tip="Finanças"
      onclick="go('fin')"
      onmouseenter="showTip(this)" onmouseleave="hideTip()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 9.5C19 6.46 15.866 4 12 4S5 6.46 5 9.5c0 1.04.31 2.01.85 2.84L5 15h2l.6 1h8.8l.6-1h2l-.85-2.66A5.9 5.9 0 0019 9.5z"/>
        <circle cx="9.5" cy="9" r=".75" fill="currentColor" stroke="none"/>
        <circle cx="14.5" cy="9" r=".75" fill="currentColor" stroke="none"/>
        <path d="M12 13.5v2.5"/>
        <path d="M9.5 16c0 .83 1.12 1.5 2.5 1.5s2.5-.67 2.5-1.5"/>
        <path d="M19 9.5h2.5v2.5H19"/>
      </svg>
    </button>

    <button class="module-btn" id="mb-meta"
      data-tip="Metas"
      onclick="go('meta')"
      onmouseenter="showTip(this)" onmouseleave="hideTip()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
        <circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/>
      </svg>
    </button>

    <button class="module-btn" id="mb-agenda"
      data-tip="Agenda"
      onclick="go('agenda')"
      onmouseenter="showTip(this)" onmouseleave="hideTip()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
        <rect x="3" y="4" width="18" height="18" rx="3"/>
        <path d="M16 2v4M8 2v4M3 10h18"/>
        <rect x="7" y="14" width="3" height="3" rx="0.5"/>
        <rect x="13" y="14" width="3" height="3" rx="0.5"/>
      </svg>
    </button>

    <div class="spacer"></div>

    <button class="module-btn" id="mb-cfg"
      data-tip="Configurações"
      onclick="go('cfg')"
      onmouseenter="showTip(this)" onmouseleave="hideTip()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
        <circle cx="12" cy="12" r="3"/>
        <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
      </svg>
    </button>

    <div class="user-avatar" title="Thiago">T</div>
  </nav>

  <!-- ══ NÍVEL 2: SIDEBAR ══ -->
  <aside class="sidebar" id="sidebar">
    <div class="sb-header">
      <div class="sb-mod-icon" id="sbIcon"></div>
      <span class="sb-mod-label" id="sbLabel">Home</span>
      <!-- Botão: colapsa sidebar -->
      <button class="sb-toggle" id="sbToggle" onclick="toggleSidebar()" title="Recolher">
        <!-- ícone muda via JS -->
        <svg id="sbToggleIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 18l-6-6 6-6"/>
        </svg>
      </button>
    </div>

    <!-- Score Jornada na sidebar -->
    <div class="sb-score">
      <div class="sb-score-top">
        <div>
          <div class="sb-score-label">Life Sync Score</div>
          <div class="sb-score-num">74</div>
        </div>
        <div style="text-align:right">
          <div class="sb-score-delta">↑ +3 esta semana</div>
          <div style="font-size:10px;color:var(--t3);margin-top:2px">Financeiro: 80</div>
        </div>
      </div>
      <div class="sb-score-bar"><div class="sb-score-fill"></div></div>
    </div>

    <nav class="sb-nav" id="sbNav"></nav>
  </aside>

  <!-- ══ MAIN ══ -->
  <div class="main" id="main">
    <header class="header">

      <!-- Botão para expandir sidebar quando fechada -->
      <button class="expand-from-bar" id="expandBtn" onclick="toggleSidebar()" title="Expandir menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 18l6-6-6-6"/>
        </svg>
      </button>

      <!-- Modo Foco: breadcrumb -->
      <div class="hd-breadcrumb" id="hdBreadcrumb">
        <span class="mod-name" id="hdModName">Home</span>
        <span class="sep">›</span>
        <span id="hdPageName">Dashboard</span>
        <span class="sep">·</span>
        <span>Fevereiro 2026</span>
      </div>

      <!-- Modo Jornada: greeting -->
      <div class="hd-greeting" id="hdGreeting">
        <span class="hd-greeting-name">Boa tarde, Thiago! ✨</span>
        <span class="hd-greeting-phrase">Você está evoluindo — 74 pontos esta semana.</span>
      </div>

      <div class="hd-spacer"></div>

      <!-- Toggle de modo -->
      <button class="mode-pill" onclick="toggleMode()" id="modePill">
        <div class="mode-pill-dot" id="modeDot">🎯</div>
        <span id="modeLabel">Modo Foco</span>
      </button>

      <!-- Tema -->
      <button class="theme-pill" id="themePill" onclick="cycleTheme()">
        <span id="themeIcon">🌙</span>
        <span id="themeLabel">Dark</span>
      </button>

      <button class="hd-notif" title="Notificações">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
          <path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/>
          <path d="M13.73 21a2 2 0 01-3.46 0"/>
        </svg>
        <span class="notif-dot"></span>
      </button>
    </header>

    <div class="content">
      <div id="contentInner" class="content-inner"></div>
    </div>
  </div>
</div>

<!-- MOBILE BOTTOM BAR -->
<nav class="mob-bar">
  <button class="mob-tab act-home" id="mob-home" onclick="go('home')">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
      <path d="M3 12L12 3l9 9"/><path d="M5 10v9a1 1 0 001 1h4v-5h4v5h4a1 1 0 001-1v-9"/>
    </svg><span>Home</span>
  </button>
  <button class="mob-tab" id="mob-fin" onclick="go('fin')">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
      <path d="M19 9.5C19 6.46 15.866 4 12 4S5 6.46 5 9.5c0 1.04.31 2.01.85 2.84L5 15h2l.6 1h8.8l.6-1h2l-.85-2.66A5.9 5.9 0 0019 9.5z"/>
      <circle cx="9.5" cy="9" r=".75" fill="currentColor" stroke="none"/>
      <circle cx="14.5" cy="9" r=".75" fill="currentColor" stroke="none"/>
      <path d="M12 13.5v2.5"/><path d="M9.5 16c0 .83 1.12 1.5 2.5 1.5s2.5-.67 2.5-1.5"/>
      <path d="M19 9.5h2.5v2.5H19"/>
    </svg><span>Finanças</span>
  </button>
  <button class="mob-tab" id="mob-meta" onclick="go('meta')">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
      <circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/>
    </svg><span>Metas</span>
  </button>
  <button class="mob-tab" id="mob-agenda" onclick="go('agenda')">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
      <rect x="3" y="4" width="18" height="18" rx="3"/>
      <path d="M16 2v4M8 2v4M3 10h18"/>
    </svg><span>Agenda</span>
  </button>
  <button class="mob-tab" id="mob-cfg" onclick="go('cfg')">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
      <circle cx="12" cy="12" r="3"/>
      <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
    </svg><span>Config</span>
  </button>
</nav>

<!-- CONTROLES PROTÓTIPO -->
<div class="controls">
  <div class="ctrl-title">🧪 Controles do Protótipo</div>
  <div class="ctrl-row">
    <div class="ctrl-lbl">Módulo</div>
    <div class="ctrl-grp">
      <button class="ctrl-btn on-home" id="ctrl-home" onclick="go('home')">Home</button>
      <button class="ctrl-btn" id="ctrl-fin"  onclick="go('fin')">Finanças</button>
      <button class="ctrl-btn" id="ctrl-meta" onclick="go('meta')">Metas</button>
      <button class="ctrl-btn" id="ctrl-agenda" onclick="go('agenda')">Agenda</button>
    </div>
  </div>
  <div class="divider"></div>
  <div class="ctrl-row">
    <div class="ctrl-lbl">Modo</div>
    <div class="ctrl-grp">
      <button class="ctrl-btn on-foco" id="ctrl-foco" onclick="setMode('foco')">🎯 Foco</button>
      <button class="ctrl-btn" id="ctrl-jornada" onclick="setMode('jornada')">🌱 Jornada</button>
    </div>
  </div>
  <div class="divider"></div>
  <div class="ctrl-row">
    <div class="ctrl-lbl">Sidebar</div>
    <div class="ctrl-grp">
      <button class="ctrl-btn" onclick="toggleSidebar()">⇆ Expandir / Recolher</button>
    </div>
  </div>
  <div class="divider"></div>
  <div class="ctrl-row">
    <div class="ctrl-lbl">Tema</div>
    <div class="ctrl-grp">
      <button class="ctrl-btn on-home" id="ctrl-dark"  onclick="setTheme('dark')">🌙 Dark</button>
      <button class="ctrl-btn"         id="ctrl-light" onclick="setTheme('light')">☀️ Light</button>
    </div>
  </div>
</div>

<script>

// ═══ AGENDA STATE ═══
var EV_TYPES = {
  trabalho:   {label:"Trabalho",   ico:"💼", color:"#10b981"},
  meta:       {label:"Meta",       ico:"🎯", color:"#0055ff"},
  saude:      {label:"Saúde",      ico:"💪", color:"#22c55e"},
  pessoal:    {label:"Pessoal",    ico:"🌟", color:"#f59e0b"},
  financeiro: {label:"Financeiro", ico:"💰", color:"#f43f5e"},
  estudo:     {label:"Estudo",     ico:"📚", color:"#8b5cf6"}
};

var evList = [
  {id:1,  title:"CLT — Salário",        type:"financeiro", date:"2026-02-01", allDay:true,  start:"",    end:"",    desc:"Crédito automático"},
  {id:2,  title:"Reunião de alinhamento",type:"trabalho",  date:"2026-02-17", allDay:false, start:"09:00",end:"10:00",desc:"Time de produto"},
  {id:3,  title:"Call cliente",          type:"trabalho",  date:"2026-02-18", allDay:false, start:"14:00",end:"15:00",desc:""},
  {id:4,  title:"Inglês — Aula 1",       type:"estudo",    date:"2026-02-18", allDay:false, start:"19:00",end:"20:30",desc:"Cambridge B2"},
  {id:5,  title:"Pagar aluguel",         type:"financeiro", date:"2026-02-19", allDay:true,  start:"",    end:"",    desc:"R$ 1.500"},
  {id:6,  title:"Academia",             type:"saude",     date:"2026-02-20", allDay:false, start:"07:00",end:"08:00",desc:"Treino A"},
  {id:7,  title:"Estudar AWS",           type:"estudo",    date:"2026-02-20", allDay:false, start:"20:00",end:"22:00",desc:"SAA-C03"},
  {id:8,  title:"1:1 Gestor",           type:"trabalho",  date:"2026-02-21", allDay:false, start:"10:00",end:"10:30",desc:"Weekly 1:1"},
  {id:9,  title:"Dentista",             type:"saude",     date:"2026-02-22", allDay:false, start:"15:00",end:"16:00",desc:"Limpeza"},
  {id:10, title:"Review semanal",       type:"pessoal",   date:"2026-02-22", allDay:false, start:"19:00",end:"20:00",desc:"Reflexão da semana"},
  {id:11, title:"Aniversário — Mãe",    type:"pessoal",   date:"2026-02-23", allDay:true,  start:"",    end:"",    desc:"🎂"},
  {id:12, title:"Academia",             type:"saude",     date:"2026-02-24", allDay:false, start:"07:00",end:"08:00",desc:"Treino B"},
  {id:13, title:"Inglês — Aula 2",      type:"estudo",    date:"2026-02-25", allDay:false, start:"19:00",end:"20:30",desc:"Cambridge B2"},
  {id:14, title:"Pagar Netflix",         type:"financeiro", date:"2026-02-05", allDay:true,  start:"",    end:"",    desc:"R$ 47,90"},
  {id:15, title:"Reunião Sprint",        type:"trabalho",  date:"2026-02-23", allDay:false, start:"09:00",end:"10:00",desc:"Sprint planning Q1"},
  {id:16, title:"Meta — Aporte Viagem", type:"meta",      date:"2026-02-28", allDay:true,  start:"",    end:"",    desc:"R$ 600"},
];
var nxtId = 17;
var editId = null, delId = null;
var agView = "semanal";
var allDayOn = false;
var selTypeK = null;
var curDetId = null;

// Week state: referência = segunda-feira da semana atual
var refDate = new Date(2026, 1, 16); // 16/Feb/2026 = Seg
// Month state
var monthY = 2026, monthM = 1; // Feb

function dateKey(d) {
  var y = d.getFullYear(), m = String(d.getMonth()+1).padStart(2,"0"), dd = String(d.getDate()).padStart(2,"0");
  return y+"-"+m+"-"+dd;
}
function addDays(d, n) {
  var r = new Date(d); r.setDate(r.getDate()+n); return r;
}
function isSameDay(a, b) { return a.getFullYear()===b.getFullYear() && a.getMonth()===b.getMonth() && a.getDate()===b.getDate(); }
function todayKey() { return dateKey(new Date(2026,1,22)); } // simula hoje = 22/fev

// ── RENDERS ─────────────────────────────────────────────
function renderAgendaPage() {
  var inner = document.getElementById("contentInner");
  if(!inner) return;
  inner.innerHTML = buildAgendaHTML();
  updateAgendaView();
}

function buildAgendaHTML() {
  var monNames = ["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];
  // period label
  var periodLbl = "";
  if(agView === "semanal") {
    var d0 = refDate, d6 = addDays(refDate,6);
    periodLbl = d0.getDate()+" – "+d6.getDate()+" "+monNames[d0.getMonth()]+" "+d0.getFullYear();
  } else {
    periodLbl = monNames[monthM]+" "+monthY;
  }

  var legendHtml = Object.keys(EV_TYPES).map(function(k){
    var t = EV_TYPES[k];
    return "<div class=\"ag-leg-item\"><div class=\"ag-leg-dot\" style=\"background:"+t.color+"\"></div>"+t.label+"</div>";
  }).join("");

  return "<div class=\"ag-page\">"
    +"<div class=\"ag-hd\">"
    +"<div class=\"ag-hdl\"><span class=\"ag-title\">Agenda</span>"
    +"<span class=\"ag-period\" id=\"ag-period\">"+periodLbl+"</span></div>"
    +"<div class=\"ag-hdr\">"
    +"<div class=\"ag-nav\">"
    +"<button class=\"ag-today\" id=\"ag-today-btn\" onclick=\"agToday()\" title=\"Voltar para o período atual\">Hoje</button>"
    +"<div class=\"ag-nav-arrows\">"
    +"<button class=\"ag-nb\" id=\"ag-prev-btn\" onclick=\"agPrev()\"><svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\"><path d=\"M15 18l-6-6 6-6\"/></svg><span id=\"ag-prev-lbl\">Anterior</span></button>"
    +"<button class=\"ag-nb\" id=\"ag-next-btn\" onclick=\"agNext()\"><span id=\"ag-next-lbl\">Próximo</span><svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\"><path d=\"M9 18l6-6-6-6\"/></svg></button>"
    +"</div>"
    +"</div>"
    +"<div class=\"ag-view-sw\">"
    +"<button class=\"ag-vsw\" id=\"vsw-sem\" onclick=\"switchView('semanal')\">Semanal</button>"
    +"<button class=\"ag-vsw\" id=\"vsw-men\" onclick=\"switchView('mensal')\">Mensal</button>"
    +"</div>"
    +"<button class=\"btn-ev\" onclick=\"openCreate()\">"
    +"<svg width=\"13\" height=\"13\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2.5\"><path d=\"M12 5v14M5 12h14\"/></svg> Novo evento</button>"
    +"</div></div>"
    +"<div class=\"ag-streak\">"
    +"<span class=\"ag-streak-ico\">🔥</span>"
    +"<span class=\"ag-streak-txt\">Você tem <strong>7 eventos planejados</strong> essa semana — ótima organização! Sua consistência na Agenda está em <strong style=\"color:var(--agenda)\">alta</strong>.</span>"
    +"</div>"
    +"<div class=\"ag-legend\">"+legendHtml+"</div>"
    +"<div id=\"ag-view-wr\" style=\"flex:1;overflow:hidden;display:flex;flex-direction:column;\"></div>"
    +"</div>";
}

function updateAgendaView() {
  var wr = document.getElementById("ag-view-wr");
  if(!wr) return;
  // Update view switcher
  var s = document.getElementById("vsw-sem"), m = document.getElementById("vsw-men");
  if(s){ s.className = "ag-vsw"+(agView==="semanal"?" on":""); }
  if(m){ m.className = "ag-vsw"+(agView==="mensal"?" on":""); }
  // Update period label
  updatePeriodLabel();
  // Update nav button labels conforme o modo
  var prevLbl = document.getElementById("ag-prev-lbl");
  var nextLbl = document.getElementById("ag-next-lbl");
  if(prevLbl) prevLbl.textContent = agView==="semanal" ? "Semana anterior" : "Mês anterior";
  if(nextLbl) nextLbl.textContent = agView==="semanal" ? "Próxima semana" : "Próximo mês";
  // Botão Hoje: sempre ativo e útil
  var todayBtn = document.getElementById("ag-today-btn");
  if(todayBtn) {
    todayBtn.classList.remove("is-current");
    todayBtn.title = agView === "semanal"
      ? "Ir para a semana atual e rolar para o horário atual"
      : "Ir para o mês atual e destacar o dia de hoje";
  }
  if(agView === "semanal") {
    wr.innerHTML = buildWeekHTML();
    var body = document.getElementById("ag-body");
    if(body) body.scrollTop = 6 * 44; // scroll to 8h+6slots=11h
  } else {
    wr.innerHTML = buildMonthHTML();
  }
}

function updatePeriodLabel() {
  var el = document.getElementById("ag-period");
  if(!el) return;
  var monNames = ["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];
  if(agView === "semanal") {
    var d0 = refDate, d6 = addDays(refDate,6);
    el.textContent = d0.getDate()+" – "+d6.getDate()+" "+monNames[d0.getMonth()]+" "+d0.getFullYear();
  } else {
    el.textContent = monNames[monthM]+" "+monthY;
  }
}

// ── SEMANAL ─────────────────────────────────────────────
function buildWeekHTML() {
  var DAYS_PT = ["Seg","Ter","Qua","Qui","Sex","Sáb","Dom"];
  var HOURS = ["07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22"];
  var SLOT_H = 44;

  // Dias da semana
  var days = [];
  for(var i=0;i<7;i++) days.push(addDays(refDate,i));

  var today = new Date(2026,1,22);

  // Dias header
  var daysHd = days.map(function(d,i){
    var isToday = isSameDay(d,today);
    var isWk = i>=5;
    return "<div class=\"ag-day-hd\">"
      +"<div class=\"ag-dname\">"+(isWk?"<span style=\"color:#f59e0b\">":"")+DAYS_PT[i]+(isWk?"</span>":"")+"</div>"
      +"<div class=\"ag-dnum"+(isToday?" today":isWk?" weekend":"")+"\">"
      +"<span>"+d.getDate()+"</span></div></div>";
  }).join("");

  // Horários col
  var timeColHtml = HOURS.map(function(h){
    return "<div class=\"ag-ts\" style=\"height:"+SLOT_H+"px\">"+h+"h</div>";
  }).join("");

  // Cols
  var colsHtml = days.map(function(d,ci){
    var dk = dateKey(d);
    var dayEvs = evList.filter(function(e){ return e.date===dk && !e.allDay; });
    var isToday = isSameDay(d,today);

    var nowLine = "";
    if(isToday) {
      // 15h22 hoje — slot index = (hora-7)*2 + minutos/30
      var nowSlot = (15-7)*2 + 1; // ~15:30
      var nowTop = nowSlot * (SLOT_H/2);
      nowLine = "<div class=\"ag-now-line\" style=\"top:"+nowTop+"px\"></div>";
    }

    var cellsHtml = HOURS.map(function(){
      return "<div class=\"ag-cell\" style=\"height:"+SLOT_H+"px\"></div>";
    }).join("");

    var evsHtml = dayEvs.map(function(e){
      var tp = EV_TYPES[e.type]||EV_TYPES.pessoal;
      var hStart = parseInt(e.start.split(":")[0]);
      var mStart = parseInt(e.start.split(":")[1]);
      var hEnd   = parseInt(e.end.split(":")[0]);
      var mEnd   = parseInt(e.end.split(":")[1]);
      var startSlot = (hStart-7)*2 + Math.round(mStart/30);
      var endSlot   = (hEnd-7)*2   + Math.round(mEnd/30);
      var span = Math.max(1, endSlot - startSlot);
      var top    = startSlot * (SLOT_H/2);
      var height = Math.max(38, span*(SLOT_H/2)-2); // mínimo 38px para caber nome + hora
      // mostra hora só se tiver altura suficiente (≥38px)
      var showTime = height >= 38;
      // mostra tipo só se tiver altura ≥ 56px (2h+)
      var showType = height >= 56;
      return "<div class=\"ag-ev\" style=\"top:"+top+"px;height:"+height+"px;background:"+tp.color+"22;border-left:3px solid "+tp.color+"\" onclick=\"openDet("+e.id+")\">"
        +(showTime ? "<div class=\"ag-ev-time\" style=\"color:"+tp.color+"\">"+e.start+"</div>" : "")
        +"<div class=\"ag-ev-name\">"+e.title+"</div>"
        +(showType ? "<div class=\"ag-ev-type\" style=\"color:"+tp.color+"\">"+tp.ico+" "+tp.label+"</div>" : "")
        +"</div>";
    }).join("");

    return "<div class=\"ag-col\" style=\"position:relative;min-height:"+(HOURS.length*SLOT_H)+"px\">"
      +nowLine+cellsHtml+evsHtml+"</div>";
  }).join("");

  // All-day strip
  var allDayStrip = days.map(function(d){
    var dk = dateKey(d);
    var ads = evList.filter(function(e){ return e.date===dk && e.allDay; });
    var chips = ads.map(function(e){
      var tp = EV_TYPES[e.type]||EV_TYPES.pessoal;
      return "<div style=\"background:"+tp.color+"22;border-left:3px solid "+tp.color+";border-radius:5px;padding:2px 5px;font-size:10px;font-weight:600;color:"+tp.color+";cursor:pointer;margin-bottom:2px\" onclick=\"openDet("+e.id+")\">"
        +e.title+"</div>";
    }).join("");
    return "<div style=\"border-right:1px solid var(--border);padding:4px 3px;min-height:28px\">"
      +(chips||"")+"</div>";
  }).join("");

  return "<div class=\"ag-week\">"
    // Time col
    +"<div class=\"ag-time-col\">"
    +"<div class=\"ag-time-top\"></div>"
    +"<div class=\"ag-time-slots\">"+timeColHtml+"</div>"
    +"</div>"
    // Grid
    +"<div class=\"ag-grid\">"
    // Days header + all-day
    +"<div class=\"ag-days-hd\">"+daysHd+"</div>"
    +"<div style=\"display:grid;grid-template-columns:repeat(7,1fr);border-bottom:1px solid var(--border);background:var(--s2)\">"+allDayStrip+"</div>"
    // Body
    +"<div class=\"ag-body\" id=\"ag-body\">"
    +"<div class=\"ag-cols\">"+colsHtml+"</div>"
    +"</div>"
    +"</div>"
    +"</div>";
}

// ── MENSAL ─────────────────────────────────────────────
function buildMonthHTML() {
  var DAYS_PT = ["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"];
  var today = new Date(2026,1,22);

  // First day of month
  var first = new Date(monthY, monthM, 1);
  var startDow = first.getDay(); // 0=Dom
  var daysInMonth = new Date(monthY, monthM+1, 0).getDate();
  var prevDays = new Date(monthY, monthM, 0).getDate();

  // Header
  var hdHtml = DAYS_PT.map(function(d){
    return "<div class=\"ag-mday-hd\">"+d+"</div>";
  }).join("");

  // Grid cells
  var cells = [];
  // Prev month days
  for(var i=startDow-1;i>=0;i--) {
    cells.push({d:prevDays-i, m:monthM-1, y:monthY, out:true});
  }
  // Current month
  for(var i=1;i<=daysInMonth;i++) {
    cells.push({d:i, m:monthM, y:monthY, out:false});
  }
  // Next month
  var rem = 42 - cells.length;
  for(var i=1;i<=rem;i++) {
    cells.push({d:i, m:monthM+1, y:monthY, out:true});
  }

  var cellsHtml = cells.map(function(c){
    var dd = String(c.d).padStart(2,"0");
    var mm = String(c.m+1).padStart(2,"0");
    var dk = c.y+"-"+mm+"-"+dd;
    var isToday = (c.y===today.getFullYear() && c.m===today.getMonth() && c.d===today.getDate());

    var dayEvs = evList.filter(function(e){ return e.date===dk; });
    var evHtml = dayEvs.slice(0,3).map(function(e){
      var tp = EV_TYPES[e.type]||EV_TYPES.pessoal;
      return "<div class=\"ag-mc-ev\" style=\"background:"+tp.color+"dd\" onclick=\"openDet("+e.id+");event.stopPropagation()\">"+tp.ico+" "+e.title+"</div>";
    }).join("");
    var moreHtml = dayEvs.length>3 ? "<div class=\"ag-mc-more\">+"+( dayEvs.length-3)+" mais</div>" : "";

    return "<div class=\"ag-mcell"+(c.out?" out":"")+(isToday?" today-cell":"")
      +"\" onclick=\"openCreateDate('"+dk+"')\">"
      +"<div class=\"ag-mc-num\">"+c.d+"</div>"
      +evHtml+moreHtml
      +"</div>";
  }).join("");

  return "<div class=\"ag-month\">"
    +"<div class=\"ag-month-hd\">"+hdHtml+"</div>"
    +"<div class=\"ag-month-grid\">"+cellsHtml+"</div>"
    +"</div>";
}

// ── NAVEGAÇÃO ─────────────────────────────────────────
function agPrev() {
  if(agView==="semanal") { refDate = addDays(refDate,-7); }
  else { monthM--; if(monthM<0){monthM=11;monthY--;} }
  updateAgendaView();
}
function agNext() {
  if(agView==="semanal") { refDate = addDays(refDate,7); }
  else { monthM++; if(monthM>11){monthM=0;monthY++;} }
  updateAgendaView();
}
function agToday() {
  if(agView==="semanal") {
    var t = new Date(2026,1,22);
    var dow = t.getDay(); var diff = dow===0?-6:1-dow;
    refDate = addDays(t,diff);
    updateAgendaView();
    // Sempre rola para o horário atual (15h22)
    setTimeout(function(){
      var body = document.getElementById("ag-body");
      if(body) {
        var SLOT_H = 44;
        var nowSlot = (15-7)*2; // 15h = slot 16 a partir das 7h
        body.scrollTop = Math.max(0, nowSlot*(SLOT_H/2) - 80);
      }
    }, 50);
  } else {
    monthY=2026; monthM=1;
    updateAgendaView();
    // Flash visual na célula do dia 22
    setTimeout(function(){
      var cells = document.querySelectorAll(".ag-mcell.today-cell");
      if(cells.length) {
        cells[0].style.transition = "background .1s";
        cells[0].style.background = "rgba(6,182,212,.22)";
        setTimeout(function(){ cells[0].style.background = ""; }, 500);
      }
    }, 50);
  }
}
function switchView(v) {
  agView = v;
  updateAgendaView();
  if(v==="semanal") { var body=document.getElementById("ag-body"); if(body) body.scrollTop=6*44; }
}

// ── CRUD ─────────────────────────────────────────────
function openMov(id){ document.getElementById(id).classList.add("open"); }
function closeMov(id){ document.getElementById(id).classList.remove("open"); }

function resetForm() {
  selTypeK=null; allDayOn=false;
  document.getElementById("ev-title").value="";
  document.getElementById("ev-date").value=todayKey();
  document.getElementById("ev-start").value="09:00";
  document.getElementById("ev-end").value="10:00";
  document.getElementById("ev-desc").value="";
  document.getElementById("allday-sw").classList.remove("on");
  document.getElementById("time-fields").style.display="";
  document.querySelectorAll(".type-btn").forEach(function(b){ b.classList.remove("sel"); b.style.borderColor=""; b.style.background=""; });
  document.querySelectorAll(".ferr.on").forEach(function(e){e.classList.remove("on");});
  document.querySelectorAll(".fin.err").forEach(function(e){e.classList.remove("err");});
}
function selType(el, k) {
  selTypeK=k;
  document.querySelectorAll(".type-btn").forEach(function(b){
    b.classList.remove("sel"); b.style.borderColor=""; b.style.background="";
  });
  var tp = EV_TYPES[k];
  el.classList.add("sel");
  el.style.borderColor=tp.color;
  el.style.background=tp.color+"18";
  el.querySelector(".type-lbl").style.color=tp.color;
  document.getElementById("fe-type").classList.remove("on");
}
function toggleAllDay() {
  allDayOn=!allDayOn;
  document.getElementById("allday-sw").classList.toggle("on",allDayOn);
  document.getElementById("time-fields").style.display=allDayOn?"none":"";
}

function openCreate() {
  editId=null; resetForm();
  document.getElementById("mov-ev-t").textContent="Novo Evento";
  document.getElementById("btn-del-ev").style.display="none";
  openMov("mov-ev");
}
function openCreateDate(dk) {
  editId=null; resetForm();
  document.getElementById("ev-date").value=dk;
  document.getElementById("mov-ev-t").textContent="Novo Evento";
  document.getElementById("btn-del-ev").style.display="none";
  openMov("mov-ev");
}
function openDet(id) {
  var ev=null; for(var i=0;i<evList.length;i++){if(evList[i].id===id){ev=evList[i];break;}}
  if(!ev)return;
  curDetId=id;
  var tp=EV_TYPES[ev.type]||EV_TYPES.pessoal;
  var ds=ev.date.split("-").reverse().join("/");
  var timeStr=ev.allDay?"Dia inteiro":ev.start+" → "+ev.end;
  document.getElementById("det-body").innerHTML=
    "<div class=\"ev-detail-hd\">"
    +"<div class=\"ev-type-dot\" style=\"background:"+tp.color+"\"></div>"
    +"<div class=\"ev-detail-title\">"+ev.title+"</div>"
    +"</div>"
    +"<div class=\"ev-meta-row\"><svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><rect x=\"3\" y=\"4\" width=\"18\" height=\"18\" rx=\"2\"/><path d=\"M16 2v4M8 2v4M3 10h18\"/></svg>"+ds+"</div>"
    +"<div class=\"ev-meta-row\"><svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><circle cx=\"12\" cy=\"12\" r=\"10\"/><path d=\"M12 6v6l4 2\"/></svg>"+timeStr+"</div>"
    +"<div class=\"ev-meta-row\"><span style=\"background:"+tp.color+"22;color:"+tp.color+";padding:3px 10px;border-radius:100px;font-size:12px;font-weight:600;border:1px solid "+tp.color+"44\">"+tp.ico+" "+tp.label+"</span></div>"
    +(ev.desc?"<div class=\"ev-desc\">"+ev.desc+"</div>":"");
  openMov("mov-det");
}
function editFromDet() {
  closeMov("mov-det");
  openEdit(curDetId);
}
function openEdit(id) {
  var ev=null; for(var i=0;i<evList.length;i++){if(evList[i].id===id){ev=evList[i];break;}}
  if(!ev)return;
  editId=id; resetForm();
  document.getElementById("mov-ev-t").textContent="Editar Evento";
  document.getElementById("btn-del-ev").style.display="";
  document.getElementById("ev-title").value=ev.title;
  document.getElementById("ev-date").value=ev.date;
  document.getElementById("ev-start").value=ev.start||"09:00";
  document.getElementById("ev-end").value=ev.end||"10:00";
  document.getElementById("ev-desc").value=ev.desc||"";
  if(ev.allDay){ allDayOn=true; document.getElementById("allday-sw").classList.add("on"); document.getElementById("time-fields").style.display="none"; }
  // sel type
  var btn=document.querySelector(".type-btn[data-type=\""+ev.type+"\"]");
  if(btn) selType(btn,ev.type);
  openMov("mov-ev");
}
function confirmDel() {
  var ev=null; for(var i=0;i<evList.length;i++){if(evList[i].id===editId){ev=evList[i];break;}}
  if(!ev)return;
  delId=editId;
  document.getElementById("cdel-desc").textContent="Excluir \""+ev.title+"\"? Esta ação não pode ser desfeita.";
  closeMov("mov-ev");
  openMov("mov-cdel");
}
function finalDel() {
  evList=evList.filter(function(x){return x.id!==delId;});
  closeMov("mov-cdel");
  updateAgendaView();
}
function saveEv() {
  // Validar
  var ok=true;
  var title=document.getElementById("ev-title").value.trim();
  var date=document.getElementById("ev-date").value;
  if(!title){document.getElementById("ev-title").classList.add("err");document.getElementById("fe-title").classList.add("on");ok=false;}
  if(!date){document.getElementById("ev-date").classList.add("err");document.getElementById("fe-date").classList.add("on");ok=false;}
  if(!selTypeK){document.getElementById("fe-type").classList.add("on");ok=false;}
  if(!ok)return;
  var start=allDayOn?"":document.getElementById("ev-start").value;
  var end=allDayOn?"":document.getElementById("ev-end").value;
  var desc=document.getElementById("ev-desc").value.trim();
  if(editId!==null) {
    for(var i=0;i<evList.length;i++){
      if(evList[i].id===editId){
        evList[i].title=title; evList[i].type=selTypeK; evList[i].date=date;
        evList[i].allDay=allDayOn; evList[i].start=start; evList[i].end=end; evList[i].desc=desc;
        break;
      }
    }
  } else {
    evList.push({id:nxtId++,title:title,type:selTypeK,date:date,allDay:allDayOn,start:start,end:end,desc:desc});
  }
  closeMov("mov-ev");
  updateAgendaView();
}

// ── STATE ──
let curMod  = 'home';
let curMode = 'foco';
let sbOpen  = true;

// ── MODULE DEFINITIONS ──
const MODS = {
  home: {
    label: 'Home', color: 'home', pageName: 'Dashboard',
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#eef2ff" stroke-width="1.8"><path d="M3 12L12 3l9 9"/><path d="M5 10v9a1 1 0 001 1h4v-5h4v5h4a1 1 0 001-1v-9"/></svg>`,
    nav: [
      { id:'dashboard', label:'Dashboard', icon:'grid', active:true },
    ],
    render: renderHome,
  },
  fin: {
    label: 'Finanças', color: 'fin', pageName: 'Dashboard',
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M19 9.5C19 6.46 15.866 4 12 4S5 6.46 5 9.5c0 1.04.31 2.01.85 2.84L5 15h2l.6 1h8.8l.6-1h2l-.85-2.66A5.9 5.9 0 0019 9.5z"/><circle cx="9.5" cy="9" r=".75" fill="#10b981" stroke="none"/><circle cx="14.5" cy="9" r=".75" fill="#10b981" stroke="none"/><path d="M12 13.5v2.5"/><path d="M9.5 16c0 .83 1.12 1.5 2.5 1.5s2.5-.67 2.5-1.5"/><path d="M19 9.5h2.5v2.5H19"/></svg>`,
    nav: [
      { id:'dash',       label:'Dashboard',   icon:'chart',  active:true },
      { id:'trans',      label:'Transações',  icon:'list' },
      { id:'recorr',     label:'Recorrentes', icon:'repeat' },
      { id:'orcamento',  label:'Orçamentos',  icon:'wallet', badge:{t:'2 alertas',c:'y'} },
      { id:'calendario', label:'Calendário',  icon:'cal' },
      { id:'plan',       label:'Planejamento',icon:'trend',  badge:{t:'PRO',c:'pro'} },
      { id:'rel',        label:'Relatórios',  icon:'doc' },
    ],
    render: renderFin,
  },
  meta: {
    label: 'Metas', color: 'meta', pageName: 'Minhas Metas',
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#0055ff" stroke-width="1.8"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></svg>`,
    nav: [
      { id:'list',  label:'Minhas Metas', icon:'target', active:true, badge:{t:'3 ativas',c:'y'} },
      { id:'nova',  label:'Nova Meta',    icon:'plus' },
      { id:'badge', label:'Conquistas',   icon:'trophy', badge:{t:'5',c:'y'} },
    ],
    render: renderMeta,
  },
  agenda: {
    label: 'Agenda', color: 'agenda', pageName: 'Semanal',
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#06b6d4" stroke-width="1.8"><rect x="3" y="4" width="18" height="18" rx="3"/><path d="M16 2v4M8 2v4M3 10h18"/><rect x="7" y="14" width="3" height="3" rx="0.5"/><rect x="13" y="14" width="3" height="3" rx="0.5"/></svg>`,
    nav: [
      { id:'sem',    label:'Semanal',       icon:'week',  active:true, badge:{t:'hoje',c:'y'} },
      { id:'mensal', label:'Mensal',        icon:'month' },
      { id:'novo',   label:'Novo Evento',   icon:'plus' },
      { id:'foco',   label:'Blocos de Foco',icon:'clock' },
    ],
    render: renderAgenda,
  },
  cfg: {
    label: 'Configurações', color: 'cfg', pageName: 'Perfil',
    icon: `<svg viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.8"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06A1.65 1.65 0 004.68 15a1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06A1.65 1.65 0 009 4.68a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06A1.65 1.65 0 0019.4 9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/></svg>`,
    nav: [
      { id:'perfil', label:'Perfil',       icon:'user',   active:true },
      { id:'modo',   label:'Modo de Uso',  icon:'toggle' },
      { id:'notif',  label:'Notificações', icon:'bell' },
      { id:'cat',    label:'Categorias',   icon:'tag' },
      { id:'plano',  label:'Plano',        icon:'star',   badge:{t:'FREE',c:'y'} },
    ],
    render: renderCfg,
  },
};

// ── ICONS ──
function ic(name) {
  const M = {
    grid:   `<path d="M3 3h7v7H3zM14 3h7v7h-7zM3 14h7v7H3zM14 14h7v7h-7z"/>`,
    chart:  `<path d="M3 3v18h18M7 16l4-4 4 4 5-5"/>`,
    list:   `<path d="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01"/>`,
    repeat: `<path d="M17 1l4 4-4 4M3 11V9a4 4 0 014-4h14M7 23l-4-4 4-4M21 13v2a4 4 0 01-4 4H3"/>`,
    wallet: `<path d="M20 12V8H4a2 2 0 010-4h16v4M20 12v4H4a2 2 0 000 4h16v-4M20 12H4"/>`,
    cal:    `<rect x="3" y="4" width="18" height="18" rx="3"/><path d="M16 2v4M8 2v4M3 10h18"/>`,
    trend:  `<path d="M3 17l5-5 4 4 9-9M14 7h7v7"/>`,
    doc:    `<path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/>`,
    target: `<circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/>`,
    plus:   `<line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>`,
    trophy: `<path d="M6 9H4a2 2 0 010-4h2M18 9h2a2 2 0 000-4h-2M6 9v2a6 6 0 0012 0V9M6 5v4h12V5"/><line x1="12" y1="15" x2="12" y2="21"/><line x1="8" y1="21" x2="16" y2="21"/>`,
    week:   `<rect x="3" y="3" width="18" height="18" rx="3"/><line x1="9" y1="3" x2="9" y2="21"/><line x1="15" y1="3" x2="15" y2="21"/>`,
    month:  `<rect x="3" y="4" width="18" height="18" rx="3"/><path d="M16 2v4M8 2v4M3 10h18"/>`,
    clock:  `<circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/>`,
    user:   `<path d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"/><circle cx="12" cy="7" r="4"/>`,
    toggle: `<rect x="1" y="5" width="22" height="14" rx="7"/><circle cx="16" cy="12" r="3"/>`,
    bell:   `<path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/>`,
    tag:    `<path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83 0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/>`,
    star:   `<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>`,
  };
  return `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7">${M[name]||''}</svg>`;
}

// ── TOOLTIP ──
const tipEl = document.getElementById('tip');
function showTip(btn) {
  const r = btn.getBoundingClientRect();
  tipEl.textContent = btn.dataset.tip;
  tipEl.style.top = (r.top + r.height/2) + 'px';
  tipEl.classList.add('show');
}
function hideTip() { tipEl.classList.remove('show'); }

// ── GO (switch module) ──
function go(mod) {
  curMod = mod;
  const mdata = MODS[mod];

  // Module bar active states
  document.querySelectorAll('.module-btn').forEach(b => {
    b.className = 'module-btn';
  });
  const mb = document.getElementById('mb-' + mod);
  if (mb) mb.classList.add('act-' + mdata.color);

  // Mobile tabs
  document.querySelectorAll('.mob-tab').forEach(b => b.className = 'mob-tab');
  const mobMap = {home:'mob-home',fin:'mob-fin',meta:'mob-meta',agenda:'mob-agenda',cfg:'mob-cfg'};
  const mobBtn = document.getElementById(mobMap[mod]);
  if (mobBtn) mobBtn.classList.add('act-' + mdata.color);

  // Control buttons
  ['home','fin','meta','agenda'].forEach(m => {
    const b = document.getElementById('ctrl-' + m);
    if (!b) return;
    b.className = 'ctrl-btn';
    if (m === mod) b.classList.add('on-' + MODS[m].color);
  });

  // Sidebar
  document.getElementById('sbIcon').innerHTML = mdata.icon;
  document.getElementById('sbLabel').textContent = mdata.label;

  // Header breadcrumb
  document.getElementById('hdModName').textContent = mdata.label;
  document.getElementById('hdPageName').textContent = mdata.pageName;

  renderSidebar(mod);
  renderContent();
}

// ── SIDEBAR NAV ──
function renderSidebar(mod) {
  const mdata = MODS[mod];
  const cls = mdata.color;
  let html = '';
  mdata.nav.forEach(item => {
    let badgeHtml = '';
    if (item.badge) {
      if (item.badge.c === 'pro') {
        badgeHtml = `<span class="nav-badge badge-pro">PRO</span>`;
      } else {
        badgeHtml = `<span class="nav-badge badge-${item.badge.c}">${item.badge.t}</span>`;
      }
    }
    const act = item.active ? `act-${cls}` : '';
    html += `<button class="nav-item ${act}" onclick="selectNav(this,'${mod}')">${ic(item.icon)}<span>${item.label}</span>${badgeHtml}</button>`;
  });
  document.getElementById('sbNav').innerHTML = html;
}

function selectNav(el, mod) {
  document.querySelectorAll('.nav-item').forEach(b => { b.className = 'nav-item'; });
  el.classList.add('act-' + MODS[mod].color);
  var lbl = (el.querySelector('span')||{}).textContent||'';
  document.getElementById('hdPageName').textContent = lbl || MODS[mod].pageName;
  if(mod === 'agenda') {
    if(lbl === 'Semanal') { agView='semanal'; renderAgendaPage(); }
    else if(lbl === 'Mensal') { agView='mensal'; renderAgendaPage(); }
    else if(lbl === 'Novo Evento') { renderAgendaPage(); setTimeout(openCreate, 80); }
    else { renderAgendaPage(); }
  } else {
    renderContent();
  }
}

// ── SIDEBAR TOGGLE ──
function toggleSidebar() {
  sbOpen = !sbOpen;
  const sb = document.getElementById('sidebar');
  const expBtn = document.getElementById('expandBtn');
  const icon = document.getElementById('sbToggleIcon');

  sb.classList.toggle('closed', !sbOpen);

  // Mostra botão de expandir no header quando fechada
  expBtn.style.display = sbOpen ? 'none' : 'flex';

  // Ícone do botão de toggle muda (seta esquerda = recolher, seta direita = expandir)
  if (sbOpen) {
    icon.innerHTML = `<path d="M15 18l-6-6 6-6"/>`;
    document.getElementById('sbToggle').title = 'Recolher sidebar';
  } else {
    icon.innerHTML = `<path d="M9 18l6-6-6-6"/>`;
    document.getElementById('sbToggle').title = 'Expandir sidebar';
  }
}

// ── MODE TOGGLE ──
function toggleMode() {
  setMode(curMode === 'foco' ? 'jornada' : 'foco');
}
function setMode(mode) {
  curMode = mode;
  document.body.classList.toggle('jornada', mode === 'jornada');
  const dot   = document.getElementById('modeDot');
  const label = document.getElementById('modeLabel');
  if (mode === 'jornada') {
    dot.textContent = '🌱';
    label.textContent = 'Modo Jornada';
    document.getElementById('ctrl-jornada').className = 'ctrl-btn on-jornada';
    document.getElementById('ctrl-foco').className    = 'ctrl-btn';
  } else {
    dot.textContent = '🎯';
    label.textContent = 'Modo Foco';
    document.getElementById('ctrl-foco').className    = 'ctrl-btn on-foco';
    document.getElementById('ctrl-jornada').className = 'ctrl-btn';
  }
  renderContent();
}

// ── RENDER CONTENT ──
function renderContent() {
  const inner = document.getElementById('contentInner');
  inner.style.animation = 'none';
  inner.offsetHeight;
  inner.style.animation = '';
  inner.innerHTML = MODS[curMod].render();
}

// ── RENDERS ──
function ann(txt) {
  return `<div class="annotation"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="12" height="12"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>${txt}</div>`;
}

function renderHome() {
  const j = curMode === 'jornada';
  return `
    ${ann('Protótipo · Home — ' + (j ? 'Modo Jornada 🌱' : 'Modo Foco 🎯'))}

    ${j ? `
    <div class="score-hero">
      <div class="score-num">74</div>
      <div class="score-right">
        <div class="score-title">Life Sync Score</div>
        <div class="score-phrase">"Você está consistente! Cada registro conta."</div>
        <div class="score-bar-bg"><div class="score-bar-fill"></div></div>
        <div class="score-components">
          <div class="score-comp">Financeiro <strong>80</strong></div>
          <div class="score-comp">Metas <strong>65</strong></div>
          <div class="score-comp">Consistência <strong>78</strong></div>
        </div>
      </div>
    </div>` : ''}

    <div class="cards-row">
      <div class="demo-card">
        <div class="card-lbl">💰 Receitas</div>
        <div class="card-val g">R$ 5.000</div>
        <div class="card-delta">↑ +12% vs. jan</div>
      </div>
      <div class="demo-card">
        <div class="card-lbl">📤 Despesas</div>
        <div class="card-val r">R$ 3.200</div>
        <div class="card-delta">↓ -5% vs. jan</div>
      </div>
      <div class="demo-card">
        <div class="card-lbl">💚 Saldo</div>
        <div class="card-val">R$ 1.800</div>
        <div class="card-delta">↑ +23% vs. jan</div>
      </div>
    </div>

    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:14px">
      <div class="demo-card">
        <div class="card-lbl" style="margin-bottom:12px">📅 Esta Semana</div>
        ${['Seg · Reunião cliente 14h','Qua · Pagar aluguel R$ 1.500','Sex · Academia 7h'].map(e=>`
        <div style="padding:7px 0;border-bottom:1px solid var(--border);font-size:13px;color:var(--t2)">${e}</div>`).join('')}
        <div style="padding-top:8px;font-size:12px;color:var(--agenda);cursor:pointer">Ver agenda completa →</div>
      </div>
      <div class="demo-card">
        <div class="card-lbl" style="margin-bottom:12px">🎯 Metas</div>
        ${[['✈️ Viagem Europa','28%','var(--meta)',28],['🛡️ Reserva Emerg.','65%','var(--green)',65]].map(([n,p,c,w])=>`
        <div style="margin-bottom:11px">
          <div style="display:flex;justify-content:space-between;font-size:12px;margin-bottom:5px">
            <span style="color:var(--t2)">${n}</span><span style="color:${c};font-weight:600">${p}</span>
          </div>
          <div style="height:5px;background:var(--s3);border-radius:3px">
            <div style="height:100%;width:${w}%;background:${c};border-radius:3px"></div>
          </div>
        </div>`).join('')}
        <div style="font-size:12px;color:var(--meta);cursor:pointer">Ver todas →</div>
      </div>
    </div>

    ${j ? `
    <div class="ai-card">
      <div class="ai-card-lbl">💡 Análise de Fevereiro — Consultor IA</div>
      <div class="ai-card-body">
        Em fevereiro você reduziu gastos em <strong>Alimentação em R$ 180</strong> vs. janeiro — ótimo sinal.
        Seu saldo deve chegar a <strong>R$ 2.200</strong> ao final do mês. Atenção: <strong>Lazer já usou 78%</strong>
        do orçamento e ainda faltam 10 dias. Quer redirecionar R$ 100 de Outros para Lazer?
      </div>
    </div>` : `
    <div class="demo-card" style="display:flex;gap:32px;align-items:center">
      <div><div style="font-size:11px;color:var(--t3);margin-bottom:4px">Orçamentos estourados</div><div style="font-family:'DM Mono',monospace;font-size:24px;color:var(--red)">1</div></div>
      <div><div style="font-size:11px;color:var(--t3);margin-bottom:4px">Metas no caminho</div><div style="font-family:'DM Mono',monospace;font-size:24px;color:var(--green)">2/3</div></div>
      <div><div style="font-size:11px;color:var(--t3);margin-bottom:4px">Streak de registro</div><div style="font-family:'DM Mono',monospace;font-size:24px;color:var(--fin)">7d</div></div>
      <div style="margin-left:auto;font-size:12px;color:var(--t3)">Fevereiro 2026</div>
    </div>`}
  `;
}

function renderFin() {
  return `
    ${ann('Protótipo · Finanças / Dashboard')}
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:20px">
      <div>
        <div class="page-title">Financeiro</div>
        <div class="page-sub">Fevereiro 2026</div>
      </div>
      <button style="padding:8px 16px;border-radius:10px;border:none;background:var(--fin);color:#fff;font-size:13px;font-family:'DM Sans',sans-serif;cursor:pointer;font-weight:500">+ Transação</button>
    </div>
    <div class="cards-row">
      <div class="demo-card"><div class="card-lbl">💰 Receitas</div><div class="card-val g">R$ 5.000</div><div class="card-delta">↑ +12%</div></div>
      <div class="demo-card"><div class="card-lbl">📤 Despesas</div><div class="card-val r">R$ 3.200</div><div class="card-delta">↓ -5%</div></div>
      <div class="demo-card"><div class="card-lbl">💚 Saldo</div><div class="card-val">R$ 1.800</div><div class="card-delta">↑ +23%</div></div>
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px">
      <div class="demo-card">
        <div class="card-lbl" style="margin-bottom:12px">💼 Envelopes de Orçamento</div>
        ${[['Moradia','R$ 1.200','R$ 1.500',80,'y'],['Alimentação','R$ 778','R$ 800',97,'r'],['Transporte','R$ 280','R$ 400',70,'g'],['Lazer','R$ 312','R$ 400',78,'y']].map(([c,s,t,p,col])=>`
        <div style="margin-bottom:11px">
          <div style="display:flex;justify-content:space-between;font-size:12px;margin-bottom:5px">
            <span style="color:var(--t2)">${c}</span>
            <span style="color:${col==='y'?'var(--yellow)':col==='r'?'var(--red)':'var(--green)'}">${s} / ${t}</span>
          </div>
          <div style="height:5px;background:var(--s3);border-radius:3px">
            <div style="height:100%;width:${p}%;background:${col==='y'?'var(--yellow)':col==='r'?'var(--red)':'var(--green)'};border-radius:3px"></div>
          </div>
        </div>`).join('')}
      </div>
      <div class="demo-card">
        <div class="card-lbl" style="margin-bottom:12px">🔄 Recorrentes do Mês</div>
        ${[['Aluguel','R$ 1.500','25/02','pago'],['Netflix','R$ 47,90','15/02','pago'],['Spotify','R$ 21,90','15/02','pago'],['Internet','R$ 99','10/03','futuro']].map(([n,v,d,s])=>`
        <div style="display:flex;justify-content:space-between;align-items:center;padding:7px 0;border-bottom:1px solid var(--border);font-size:13px">
          <span style="color:var(--t2)">${n}</span>
          <span style="display:flex;align-items:center;gap:10px">
            <span style="font-size:10px;color:${s==='pago'?'var(--green)':'var(--t3)'};background:${s==='pago'?'rgba(34,197,94,0.1)':'var(--s3)'};padding:2px 6px;border-radius:4px">${s==='pago'?'✓ pago':'futuro'}</span>
            <span style="font-family:'DM Mono',monospace;color:var(--red)">-${v}</span>
          </span>
        </div>`).join('')}
      </div>
    </div>
  `;
}

function renderMeta() {
  const j = curMode === 'jornada';
  return `
    ${ann('Protótipo · Metas — ' + (j ? 'Modo Jornada 🌱' : 'Modo Foco 🎯'))}
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:4px">
      <div class="page-title">Minhas Metas</div>
      <button style="padding:8px 16px;border-radius:10px;border:none;background:var(--meta);color:#fff;font-size:13px;font-family:'DM Sans',sans-serif;cursor:pointer;font-weight:500">+ Nova Meta</button>
    </div>
    <div class="page-sub">3 ativas · 1 concluída · ${j ? '<span style="color:var(--yellow)">1 em risco</span>' : '1 em risco'}</div>

    ${[
      {icon:'✈️',name:'Viagem para Europa',pct:28,cur:'R$ 4.200',total:'R$ 15.000',status:'Em risco',sc:'y',detail:'Ritmo: R$ 700/mês · Precisa: R$ 1.100/mês',prazo:'Dez 2026',warn:j},
      {icon:'🛡️',name:'Reserva de Emergência',pct:65,cur:'R$ 9.750',total:'R$ 15.000',status:'No caminho',sc:'g',detail:'Ritmo: R$ 1.050/mês ✅',prazo:'Jun 2026',warn:false},
      {icon:'📚',name:'Certificação AWS',pct:40,cur:'40%',total:'100%',status:'No caminho',sc:'g',detail:'3 sessões/semana agendadas',prazo:'Mai 2026',warn:false},
    ].map(m => `
    <div class="demo-card" style="margin-bottom:12px;${m.sc==='y'?'border-color:rgba(245,158,11,0.2)':''}">
      <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px">
        <div style="display:flex;align-items:center;gap:10px">
          <span style="font-size:26px">${m.icon}</span>
          <div>
            <div style="font-weight:600;font-size:14px;color:var(--t1)">${m.name}</div>
            <div style="font-size:12px;color:var(--t3)">Prazo: ${m.prazo}</div>
          </div>
        </div>
        <span style="font-size:11px;font-weight:600;padding:3px 8px;border-radius:6px;background:${m.sc==='y'?'rgba(245,158,11,0.1)':'rgba(34,197,94,0.1)'};color:${m.sc==='y'?'var(--yellow)':'var(--green)'}">${m.status}</span>
      </div>
      <div style="display:flex;justify-content:space-between;font-size:12px;margin-bottom:6px">
        <span style="color:var(--t3)">${m.cur} de ${m.total}</span>
        <span style="font-weight:700;color:var(--meta)">${m.pct}%</span>
      </div>
      <div style="height:7px;background:var(--s3);border-radius:4px;margin-bottom:8px">
        <div style="height:100%;width:${m.pct}%;background:linear-gradient(90deg,var(--fin),var(--meta));border-radius:4px;transition:width .6s cubic-bezier(.4,0,.2,1)"></div>
      </div>
      <div style="font-size:12px;color:var(--t3)">${m.detail}</div>
      ${m.warn ? `<div style="margin-top:10px;padding:9px;background:rgba(245,158,11,0.07);border-radius:8px;border:1px solid rgba(245,158,11,0.15);font-size:12px;color:var(--yellow)">💡 No ritmo atual você chega em fev/2027 — 2 meses além do planejado. Quer aumentar o aporte para R$ 1.100?</div>` : ''}
    </div>`).join('')}
  `;
}

function renderAgenda() { renderAgendaPage(); return ""; }

function renderCfg() {
  return `
    ${ann('Protótipo · Configurações')}
    <div class="page-title">Configurações</div>
    <div class="page-sub">Personalize sua experiência no SyncLife</div>
    <div style="max-width:480px">
      <div class="demo-card" style="margin-bottom:12px">
        <div class="card-lbl" style="margin-bottom:14px">Perfil</div>
        <div style="display:flex;align-items:center;gap:14px;margin-bottom:18px">
          <div style="width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,var(--fin),var(--meta));display:flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-weight:800;font-size:20px;color:#fff">T</div>
          <div>
            <div style="font-weight:600;font-size:15px">Thiago</div>
            <div style="font-size:12px;color:var(--t3)">thiago@email.com</div>
          </div>
        </div>
        ${[['Nome','Thiago'],['Moeda','R$ BRL']].map(([l,v])=>`
        <div style="margin-bottom:12px">
          <div style="font-size:11px;color:var(--t3);margin-bottom:4px">${l}</div>
          <div style="padding:9px 12px;background:var(--s3);border:1px solid var(--border);border-radius:9px;font-size:13px;color:var(--t2)">${v}</div>
        </div>`).join('')}
      </div>
      <div class="demo-card">
        <div class="card-lbl" style="margin-bottom:12px">Plano atual</div>
        <div style="display:flex;align-items:center;justify-content:space-between;padding:12px;background:var(--s3);border:1px solid var(--border);border-radius:10px">
          <div>
            <div style="font-weight:600">Plano Free</div>
            <div style="font-size:12px;color:var(--t3)">3 metas · 200 transações/mês</div>
          </div>
          <button style="padding:7px 14px;border-radius:9px;border:none;background:linear-gradient(135deg,#10b981,#0055ff);color:#fff;font-size:13px;font-family:'DM Sans',sans-serif;cursor:pointer;font-weight:600">Upgrade PRO</button>
        </div>
      </div>
    </div>
  `;
}

// ── THEME ──
let curTheme = 'dark';
const THEMES = ['dark','light'];
const THEME_META = {
  dark:  { icon:'🌙', label:'Dark'  },
  light: { icon:'☀️', label:'Light' },
};

function cycleTheme() {
  const idx = THEMES.indexOf(curTheme);
  setTheme(THEMES[(idx + 1) % THEMES.length]);
}

function setTheme(t) {
  curTheme = t;
  document.body.classList.toggle('light', t === 'light');

  const meta = THEME_META[t];
  document.getElementById('themeIcon').textContent  = meta.icon;
  document.getElementById('themeLabel').textContent = meta.label;

  // ctrl buttons
  document.getElementById('ctrl-dark').className  = 'ctrl-btn' + (t === 'dark'  ? ' on-home' : '');
  document.getElementById('ctrl-light').className = 'ctrl-btn' + (t === 'light' ? ' on-home' : '');
}

// ── INIT ──
go('agenda'); setTimeout(function(){ var b=Array.from(document.querySelectorAll('.nav-item')).find(function(e){return e.querySelector('span')&&e.querySelector('span').textContent.trim()==='Semanal';}); if(b)b.click(); else renderAgendaPage(); },80);
</script>

<!-- Modal criar/editar evento -->
<div class="mov" id="mov-ev" onclick="if(event.target===this)closeMov('mov-ev')">
  <div class="mbox">
    <div class="mhd">
      <span class="mttl" id="mov-ev-t">Novo Evento</span>
      <button class="mxb" onclick="closeMov('mov-ev')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg></button>
    </div>
    <div class="mbd">
      <div class="fl">
        <label class="flbl">Título</label>
        <input class="fin" id="ev-title" type="text" placeholder="Ex: Reunião com cliente, Academia...">
        <span class="ferr" id="fe-title">Título obrigatório</span>
      </div>
      <div class="fl">
        <label class="flbl">Tipo</label>
        <div class="type-grid" id="type-grid">
          <div class="type-btn" onclick="selType(this,'trabalho')" data-type="trabalho"><span class="type-ico">💼</span><span class="type-lbl">Trabalho</span></div>
          <div class="type-btn" onclick="selType(this,'meta')" data-type="meta"><span class="type-ico">🎯</span><span class="type-lbl">Meta</span></div>
          <div class="type-btn" onclick="selType(this,'saude')" data-type="saude"><span class="type-ico">💪</span><span class="type-lbl">Saúde</span></div>
          <div class="type-btn" onclick="selType(this,'pessoal')" data-type="pessoal"><span class="type-ico">🌟</span><span class="type-lbl">Pessoal</span></div>
          <div class="type-btn" onclick="selType(this,'financeiro')" data-type="financeiro"><span class="type-ico">💰</span><span class="type-lbl">Financeiro</span></div>
          <div class="type-btn" onclick="selType(this,'estudo')" data-type="estudo"><span class="type-ico">📚</span><span class="type-lbl">Estudo</span></div>
        </div>
        <span class="ferr" id="fe-type">Selecione um tipo</span>
      </div>
      <div class="fl">
        <label class="flbl">Data</label>
        <input class="fin" id="ev-date" type="date" value="2026-02-22">
        <span class="ferr" id="fe-date">Data obrigatória</span>
      </div>
      <div class="allday-row" onclick="toggleAllDay()">
        <div style="display:flex;align-items:center;gap:10px"><span style="font-size:18px">📅</span><div><div style="font-size:13px;font-weight:600;color:var(--t1)">Dia inteiro</div><div style="font-size:11px;color:var(--t3)">Sem horário definido</div></div></div>
        <div class="rsw" id="allday-sw"><div class="rknob"></div></div>
      </div>
      <div id="time-fields">
        <div class="time-row">
          <div class="fl">
            <label class="flbl">Início</label>
            <input class="fin" id="ev-start" type="time" value="09:00">
          </div>
          <div class="fl">
            <label class="flbl">Fim</label>
            <input class="fin" id="ev-end" type="time" value="10:00">
          </div>
        </div>
      </div>
      <div class="fl">
        <label class="flbl">Descrição <span style="font-weight:400;color:var(--t3);text-transform:none;letter-spacing:0">(opcional)</span></label>
        <input class="fin" id="ev-desc" type="text" placeholder="Detalhes sobre o evento...">
      </div>
    </div>
    <div class="mft">
      <button class="bcncl" onclick="closeMov('mov-ev')">Cancelar</button>
      <button class="bdel" id="btn-del-ev" style="display:none" onclick="confirmDel()">Excluir</button>
      <button class="bsave" onclick="saveEv()">✓ Salvar</button>
    </div>
  </div>
</div>

<!-- Modal detalhe evento -->
<div class="mov" id="mov-det" onclick="if(event.target===this)closeMov('mov-det')">
  <div class="mbox" style="max-width:420px">
    <div class="mhd">
      <span class="mttl">Evento</span>
      <button class="mxb" onclick="closeMov('mov-det')"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 6L6 18M6 6l12 12"/></svg></button>
    </div>
    <div class="mbd" id="det-body"></div>
    <div class="mft">
      <button class="bcncl" onclick="closeMov('mov-det')">Fechar</button>
      <button class="bsave" style="background:var(--s3);color:var(--t1);border:1px solid var(--border)" onclick="editFromDet()">✏️ Editar</button>
    </div>
  </div>
</div>

<!-- Modal confirmar exclusão -->
<div class="mov" id="mov-cdel" onclick="if(event.target===this)closeMov('mov-cdel')">
  <div class="mconf">
    <div class="fico" style="background:rgba(244,63,94,.1)">🗑️</div>
    <div class="ft">Excluir evento?</div>
    <p class="fd" id="cdel-desc">Esta ação não pode ser desfeita.</p>
    <div class="facts">
      <button class="fcncl" onclick="closeMov('mov-cdel')">Cancelar</button>
      <button class="fok r" onclick="finalDel()">Excluir</button>
    </div>
  </div>
</div>

</body>
</html>
